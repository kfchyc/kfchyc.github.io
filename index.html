<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ryotrix.dev","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://ryotrix.dev/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Lex">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://ryotrix.dev/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<title>Hexo</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">8</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Lex</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/ARM%E5%8F%8A%E6%B1%87%E7%BC%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/ARM%E5%8F%8A%E6%B1%87%E7%BC%96/" class="post-title-link" itemprop="url">ARM及汇编</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 14:21:55 / 修改时间：08:01:05" itemprop="dateCreated datePublished" datetime="2021-04-06T14:21:55+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ARM-及-汇编"><a href="#ARM-及-汇编" class="headerlink" title="ARM 及 汇编"></a>ARM 及 汇编</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/82490125">https://zhuanlan.zhihu.com/p/82490125</a></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gpa06f17azj30n10g9myn.jpg"></p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><h3 id="数据传送指令"><a href="#数据传送指令" class="headerlink" title="数据传送指令"></a>数据传送指令</h3><h4 id="LDR-STR"><a href="#LDR-STR" class="headerlink" title="LDR/STR"></a>LDR/STR</h4><ol>
<li><p>x86 架构：</p>
<p>寄存器之间 / 寄存器和内存见可以使用 MOV 指令 ；</p>
<p>允许直接操作内存单元上的数据。</p>
</li>
<li><p>ARM架构：</p>
<p>寄存器之间传送数据使用 MOV / 寄存器和内存之间使用 LDR ( load ) 和 STR ( store )；</p>
<p><img src="https://pic1.zhimg.com/80/v2-effe338f1536cce9bf286280cf021de4_1440w.jpg" alt="img"></p>
<p>内存单元上的数据不允许被直接操作，必须先放到寄存器中。</p>
</li>
</ol>
<h4 id="LTM-STM"><a href="#LTM-STM" class="headerlink" title="LTM / STM"></a>LTM / STM</h4><p>一次加载 / 存储多个寄存器</p>
<h4 id="LTP-STP-armv8-x64"><a href="#LTP-STP-armv8-x64" class="headerlink" title="LTP / STP ( armv8 x64 )"></a>LTP / STP ( armv8 x64 )</h4><p>一次加载 / 存储<strong>最多两个</strong>寄存器</p>
<p>避免产生分散的突发传输( LTM / STM )，高效利用双 pipeline 特性。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/62ea9cfecf80">https://www.jianshu.com/p/62ea9cfecf80</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/iosDevSnippetsAndSkills/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/iosDevSnippetsAndSkills/" class="post-title-link" itemprop="url">iosDevSnippetsAndSkills</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 11:14:33 / 修改时间：08:01:05" itemprop="dateCreated datePublished" datetime="2021-04-06T11:14:33+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="iOS-零散知识点"><a href="#iOS-零散知识点" class="headerlink" title="iOS 零散知识点"></a>iOS 零散知识点</h1><h2 id="RunLoop"><a href="#RunLoop" class="headerlink" title="RunLoop"></a>RunLoop</h2><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxcx5zeedj30u00fmq4q.jpg"></p>
<h2 id="内存-amp-Debug"><a href="#内存-amp-Debug" class="headerlink" title="内存 &amp; Debug"></a>内存 &amp; Debug</h2><h3 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h3><p>fp 寄存器存储了上一帧的地址，类似一个链表的起始地址，通过 fp 不断回溯可以将整个 Backtrace 函数调用栈进行串联。</p>
<h2 id="有没有办法将参数的NSDictionary附加到NSURLRequest而不是手动创建字符串？"><a href="#有没有办法将参数的NSDictionary附加到NSURLRequest而不是手动创建字符串？" class="headerlink" title="有没有办法将参数的NSDictionary附加到NSURLRequest而不是手动创建字符串？"></a>有没有办法将参数的<strong>NSDictionary</strong>附加到<strong>NSURLRequest</strong>而不是手动创建字符串？</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/106457">https://cloud.tencent.com/developer/ask/106457</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NSURLComponents *url &#x3D; [[NSURLComponents alloc] initWithURL:request.URL resolvingAgainstBaseURL:YES];</span><br><span class="line">NSMutableArray *queryItems &#x3D; NSMutableArray.new;</span><br><span class="line">[params enumerateKeysAndObjectsUsingBlock:^(NSString *name, NSString *value, BOOL *stop) &#123;</span><br><span class="line">   [queryItems addObject:[NSURLQueryItem queryItemWithName:name </span><br><span class="line">                          value:[value stringByAddingPercentEncodingWithAllowedCharacters:NSCharacterSet.URLQueryAllowedCharacterSet]</span><br><span class="line">                         ]</span><br><span class="line">   ];</span><br><span class="line">&#125;];</span><br><span class="line">url.queryItems &#x3D; queryItems;</span><br><span class="line">request.URL &#x3D; url.URL;</span><br></pre></td></tr></table></figure>



<h2 id="获取屏幕尺寸的两种方法"><a href="#获取屏幕尺寸的两种方法" class="headerlink" title="获取屏幕尺寸的两种方法"></a>获取屏幕尺寸的两种方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGSize screenSize &#x3D; UIApplication.sharedApplication.delegate.window.bounds.size;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGSize screenSize &#x3D; UIScreen.mainScreen.bounds.size;</span><br></pre></td></tr></table></figure>



<h2 id="Date-Extensions-判断-获取时间戳-时间差"><a href="#Date-Extensions-判断-获取时间戳-时间差" class="headerlink" title="Date+Extensions: 判断/获取时间戳/时间差"></a>Date+Extensions: 判断/获取时间戳/时间差</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Date</span> </span>&#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  是否为今天</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">isToday</span>()</span> -&gt; <span class="type">Bool</span>&#123;</span><br><span class="line">      <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">      <span class="keyword">let</span> unit: <span class="type">Set</span>&lt;<span class="type">Calendar</span>.<span class="type">Component</span>&gt; <span class="operator">=</span> [.day,.month,.year]</span><br><span class="line">      <span class="keyword">let</span> nowComps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="type">Date</span>())</span><br><span class="line">      <span class="keyword">let</span> selfCmps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="keyword">self</span>)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> (selfCmps.year <span class="operator">==</span> nowComps.year) <span class="operator">&amp;&amp;</span></span><br><span class="line">      (selfCmps.month <span class="operator">==</span> nowComps.month) <span class="operator">&amp;&amp;</span></span><br><span class="line">      (selfCmps.day <span class="operator">==</span> nowComps.day)</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  是否为昨天</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">isYesterday</span>()</span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">      <span class="keyword">let</span> unit: <span class="type">Set</span>&lt;<span class="type">Calendar</span>.<span class="type">Component</span>&gt; <span class="operator">=</span> [.day,.month,.year]</span><br><span class="line">      <span class="keyword">let</span> nowComps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="type">Date</span>())</span><br><span class="line">      <span class="keyword">let</span> selfCmps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="keyword">self</span>)</span><br><span class="line">      <span class="keyword">if</span> selfCmps.day <span class="operator">==</span> <span class="literal">nil</span> <span class="operator">||</span> nowComps.day <span class="operator">==</span> <span class="literal">nil</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> count <span class="operator">=</span> nowComps.day<span class="operator">!</span> <span class="operator">-</span> selfCmps.day<span class="operator">!</span></span><br><span class="line">      <span class="keyword">return</span> (selfCmps.year <span class="operator">==</span> nowComps.year) <span class="operator">&amp;&amp;</span></span><br><span class="line">         (selfCmps.month <span class="operator">==</span> nowComps.month) <span class="operator">&amp;&amp;</span></span><br><span class="line">         (count <span class="operator">==</span> <span class="number">1</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">///只有年月日的字符串</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">dataWithYMD</span>()</span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> fmt <span class="operator">=</span> <span class="type">DateFormatter</span>()</span><br><span class="line">      fmt.dateFormat <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span></span><br><span class="line">      <span class="keyword">let</span> selfStr <span class="operator">=</span> fmt.string(from: <span class="keyword">self</span>)</span><br><span class="line">      <span class="keyword">let</span> result <span class="operator">=</span> fmt.date(from: selfStr)<span class="operator">!</span></span><br><span class="line">      <span class="built_in">print</span>(result)</span><br><span class="line">      <span class="keyword">return</span> selfStr</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">///获取当前年月日的时间戳</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">timeIntervalWithYMDDate</span>()</span> -&gt; <span class="type">TimeInterval</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> fmt <span class="operator">=</span> <span class="type">DateFormatter</span>()</span><br><span class="line">      fmt.dateFormat <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span></span><br><span class="line">      <span class="keyword">let</span> selfStr <span class="operator">=</span> fmt.string(from: <span class="keyword">self</span>)</span><br><span class="line">      <span class="keyword">let</span> result <span class="operator">=</span> fmt.date(from: selfStr)<span class="operator">!</span></span><br><span class="line">      <span class="keyword">return</span> result.timeIntervalSinceReferenceDate <span class="operator">+</span> <span class="number">24</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">*</span> <span class="number">60</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  是否为今年</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">isThisYear</span>()</span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">       <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">       <span class="keyword">let</span> nowCmps <span class="operator">=</span> calendar.dateComponents([.year], from: <span class="type">Date</span>())</span><br><span class="line">       <span class="keyword">let</span> selfCmps <span class="operator">=</span> calendar.dateComponents([.year], from: <span class="keyword">self</span>)</span><br><span class="line">       <span class="keyword">let</span> result <span class="operator">=</span> nowCmps.year <span class="operator">==</span> selfCmps.year</span><br><span class="line">       <span class="keyword">return</span> result</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  获得与当前时间的差距</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">deltaWithNow</span>()</span> -&gt; <span class="type">DateComponents</span>&#123;</span><br><span class="line">      <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">      <span class="keyword">let</span> cmps <span class="operator">=</span> calendar.dateComponents([.hour,.minute,.second], from: <span class="keyword">self</span>, to: <span class="type">Date</span>())</span><br><span class="line">      <span class="keyword">return</span> cmps</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><p>特殊的符号”^”与”$”,分别表示一个字符串的开始与结束。</p>
<p>“^dog”:表示以”dog”开头的字符串（”dog product”,”dog123”,”dog” ）</p>
<p>类似于:- (BOOL)hasPrefix:(NSString *)aString;</p>
<p>“dog$”:表示以dog为结尾的字符串（”Product Manager is a dog”, “it is a dog”）</p>
<p>类似于:- (BOOL)hasSuffix:(NSString *)aString;</p>
<p>“^apple$”:表示以”apple”开头且以”apple”结尾的字符串</p>
<p>“banana”:表示任何包含”banana”的字符串</p>
<p>类似于 iOS8的新方法- (BOOL)containsString:(NSString *)aString,搜索子串用的。</p>
<p>“*”,”+”,”?”:分别表示”没有或更多([0, +∞)取整数)”,”一个或更多([1,+∞)取整数)”,”没有或一个([0,1]取整数)”</p>
<p>“ab*”:表示一个”a”后面按跟着0个或者N个”b”(“a”,”ab”,”abbbf”,这里并没有说是以b结尾)</p>
<p>“ab+”:表示一个”a”后面跟着至少一个”b”(“ab”,”abb”)</p>
<p>“ab?”:表示一个”a”后面跟着一个或者0个”b”(“a”,”abc”,”af”)</p>
<p>“a?b+$”:表示字符串末尾有0个或者1个”a”或1个”a”跟着1个或者多个”b”(“ab”,”b”,”bbb”,”abbbb”,……)</p>
<p>可以用大括号括起来（{}），表示一个重复的具体范围。例如</p>
<p>“ab{4}”:表示一个”a”跟着4个”b”,”abbbb”</p>
<p>‘’’ab{1,}’:表示一个”a”跟着至少1个”b”,(“ab”,”abb”,….)</p>
<p>“ab{3,4}”:表示一个”a”跟着3个或者4个”b”(“abbb”,”abbbb”)</p>
<p>所以”*”等于{0,},”+”等于{1,},”?”等于{0,1}。</p>
<p>注意：可以没有上线，但是不能没有下线{,5}为错误写法。</p>
<p>“|”表示“或”操作</p>
<p>“a|b”:表示一个字符串中含有”a”或者”b”</p>
<p>“(a|bcd)ef”:表示”aef”或者”bcdef”</p>
<p>“(a|b)*c”:表示”a”或者”b”后面跟着0或者多个”c”(“a”,”b”,”ac”,”accccc”,”bc”,”bcccc”)</p>
<p>方括号”[ ]“表示在括号内的众多字符中，选择1-N个括号内的符合语法的字符作为结果，例如</p>
<p>“[ab]”:表示一个字符串含有”a”或”b”，等价于”a|b”</p>
<p>“[a-d]”:表示一个字符串包含a-d中的一个，等价于”a|b|c|d”或者”[abcd]”</p>
<p>“^[a-zA-Z]”:表示以字母开头的字符串。</p>
<p>“[0-9]a”:表示”a”前面有一个数字。</p>
<p>“[a-zA-Z0-9]$”:表示一个字符串以字母或者数字结尾。</p>
<p>“.”:表示除了”\n”,”\r”之外的任意单个字符串。</p>
<p>“a.[a-z]”:表示一个”a”后面你跟着一个任意一个字符串和一个小写字母。</p>
<p>“^.{5}$”:表示任意一个长度是5的字符串。</p>
<p>“\num” 其中num是一个正整数。表示”\num”之前的字符出现相同的个数，例如</p>
<p>“(.)\1”:表示两个连续相同的字符。</p>
<p>“10{1,2}“:表示”1”后面跟着1个或者2个”0”(“10”,”100”)</p>
<p>“0{3,}“:表示至少有3个连续的”0”(“000”,”0000”)</p>
<p>在方括号里用’^’表示不希望出现的字符，’^’应在方括号里的第一位。</p>
<p>“@[^a-zA-Z]@”:表示两个”@”之间不应该有字母。</p>
<p>常用的正则：</p>
<p>“\d”:匹配一个数字字符，等价于”[0-9]”.</p>
<p>“\D”:匹配一个非数字字符，等价于”[^0-9]”</p>
<p>“\w”:匹配包括下划线的任何单词字符，等价于”[a-zA-Z0-9_]”</p>
<p>“\W”:匹配任何非单词字符，等价于”[^a-zA-Z0-9_]”</p>
<p>iOS中书写正则表达式，碰到转义字符，多加一个“\”,例如：</p>
<p>全数字字符：@”^\d+$”</p>
<h3 id="常用正则"><a href="#常用正则" class="headerlink" title="常用正则"></a>常用正则</h3><p>(1) 验证电话号码：（”^(\d{3,4}-)\d{7,8}$”） 　</p>
<p>(2) 验证Email地址：(“^\w+([-+.]\w+)*@\w+([-.]\w+)<em>.\w+([-.]\w+)</em>$”)； 　　</p>
<p>(3) 整数或者小数：^[0-9]+([.]{0,1}[0-9]+){0,1}$ 　　</p>
<p>(4) 只能输入数字：”^[0-9]*$”。 　　</p>
<p>(5) 只能输入由26个英文字母组成的字符串：”^[A-Za-z]+$”。 </p>
<p>(6) 验证是否含有^%&amp;’,;=?$\”等字符：”[^%&amp;’,;=?$\x22]+”。 　</p>
<p>(7) 只能输入汉字：”^[\u4e00-\u9fa5]{0,}$”。 　　</p>
<p>(8) 验证一年的12个月：”^(0?[1-9]|1[0-2])$”正确格式为：”01″～”09″和”10″～”12″。 　　</p>
<p>(9) 验证一个月的31天：”^((0?[1-9])|((1|2)[0-9])|30|31)$”正确格式为；”01″～”09″、”10″～”29″和“30”~“31”。 　　</p>
<p>(10) 获取日期正则表达式：\d{4}[年|-|.]\d{\1-\12}[月|-|.]\d{\1-\31}日? 注：可用来匹配大多数年月日信息。 　　</p>
<p>(11) 匹配空白行的正则表达式：\n\s*\r 注：可以用来删除空白行 </p>
<p>(12) 匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$ 注：表单验证时很实用 </p>
<p>(13) 匹配腾讯QQ号：[1-9][0-9]{4,14} 注：腾讯QQ号从10 000 开始 　　</p>
<p>(14) 匹配中国邮政编码：[1-9]\d{5}(?!\d) 注：中国邮政编码为6位数字 　　</p>
<p>(15) 匹配ip地址：((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)。</p>
<ol>
<li><p>验证用户名和密码：”^[a-zA-Z]\w{5,15}$” 　　</p>
</li>
<li><p>验证电话号码：（”^([\d{3,4}-)\d{7,8}$] 　　eg：021-68686868 0511-6868686； 　　</p>
</li>
<li><p>验证手机号码：”^1[3|4|5|7|8][0-9]\d{8}$”； 　　</p>
</li>
<li><p>验证身份证号（15位或18位数字）：”\d{14}[[0-9],0-9xX]”</p>
</li>
<li><p>验证Email地址：(“^\w+([-+.]\w+)*@\w+([-.]\w+)<em>.\w+([-.]\w+)</em>$”);</p>
</li>
<li><p>只能输入由数字和26个英文字母组成的字符串：(“^[A-Za-z0-9]+$”) ; </p>
</li>
<li><p>整数或者小数：^[0-9]+([.]{0,1}[0-9]+){0,1}$ 　　</p>
</li>
<li><p>只能输入数字：”^[0-9]*$”。 　　</p>
</li>
<li><p>只能输入n位的数字：”^\d{n}$”。 　　</p>
</li>
<li><p>只能输入至少n位的数字：”^\d{n,}$”。 　　</p>
</li>
<li><p>只能输入m~n位的数字：”^\d{m,n}$”。 　　</p>
</li>
<li><p>只能输入零和非零开头的数字：”^(0|[1-9][0-9]*)$”。 　　</p>
</li>
<li><p>只能输入有两位小数的正实数：”^[0-9]+(.[0-9]{2})?$”。 　</p>
</li>
<li><p>只能输入有1~3位小数的正实数：”^[0-9]+(.[0-9]{1,3})?$”。 </p>
</li>
<li><p>只能输入非零的正整数：”^+?[1-9][0-9]*$”。 　　</p>
</li>
<li><p>只能输入非零的负整数：”^-[1-9][]0-9″*$。 　　</p>
</li>
<li><p>只能输入长度为3的字符：”^.{3}$”。 　　</p>
</li>
<li><p>只能输入由26个英文字母组成的字符串：”^[A-Za-z]+$”。 　</p>
</li>
<li><p>只能输入由26个大写英文字母组成的字符串：”^[A-Z]+$”。 </p>
</li>
<li><p>只能输入由26个小写英文字母组成的字符串：”^[a-z]+$”。 </p>
</li>
<li><p>验证是否含有^%&amp;’,;=?$\”等字符：”[^%&amp;’,;=?$\x22]+”。 </p>
</li>
<li><p>只能输入汉字：”^[\u4e00-\u9fa5]{0,}$”。 　　</p>
</li>
<li><p>验证URL：”^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]*)?$”。 　　</p>
</li>
<li><p>验证一年的12个月：”^(0?[1-9]|1[0-2])$”正确格式为：”01″～”09″和”10″～”12″。 　　</p>
</li>
<li><p>验证一个月的31天：”^((0?[1-9])|((1|2)[0-9])|30|31)$”正确格式为；”01″～”09″、”10″～”29″和“30”~“31”。 　　</p>
</li>
<li><p>获取日期正则表达式：[\d{4]}[年|-|.]\d{\1-\12}[月|-|.]\d{\1-\31}日? 　　评注：可用来匹配大多数年月日信息。 　　</p>
</li>
<li><p>匹配双字节字符(包括汉字在内)：[^\x00-\xff] 　　评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1） 　　</p>
</li>
<li><p>匹配空白行的正则表达式：\n\s*\r 　　评注：可以用来删除空白行 　　</p>
</li>
<li><p>匹配HTML标记的正则表达式：&lt;(\S*?)[^&gt;]<em>&gt;.</em>?&lt;/&gt;|&lt;.*? /&gt; 　　评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力 　　</p>
</li>
<li><p>匹配首尾空白字符的正则表达式：^\s*|\s*$ 　　评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式 </p>
</li>
<li><p>匹配网址URL的正则表达式：[a-zA-z]+://[^\s]* 　　评注：网上流传的版本功能很有限，上面这个基本可以满足需求 　　</p>
</li>
<li><p>匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$ 　　评注：表单验证时很实用 　　</p>
</li>
<li><p>匹配腾讯QQ号：[1-9][0-9]{4,14} 　　评注：腾讯QQ号从10 000 开始 </p>
</li>
<li><p>匹配中国邮政编码：[1-9]\d{5}(?!\d) 　　评注：中国邮政编码为6位数字 　　</p>
</li>
<li><p>匹配ip地址：((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)。 　　下面给出正则表达式的元字符（来自百度百科）</p>
</li>
</ol>
<h3 id="简单应用"><a href="#简单应用" class="headerlink" title="简单应用"></a>简单应用</h3><ul>
<li>验证是不是QQ号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSString *pattern &#x3D; @&quot;[1-9][0-9]&#123;4,14&#125;&quot;;</span><br><span class="line">NSPredicate * pre &#x3D; [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, pattern];</span><br><span class="line">BOOL isMatch &#x3D; [pre evaluateWithObject:self.enterText.text];</span><br></pre></td></tr></table></figure>



<h2 id="网络状态码"><a href="#网络状态码" class="headerlink" title="网络状态码"></a>网络状态码</h2><ul>
<li>1XX 提示信息：请求正在处理中</li>
<li>2XX 成功错误码：请求已被接受处理</li>
<li>3XX 重定向：完成请求需要附加操作</li>
<li>4XX 客户端错误：请求资源有误或者请求不合法，服务器无法处理</li>
<li>5XX 服务器错误：服务器处理请求出错</li>
</ul>
<h3 id="常见状态码"><a href="#常见状态码" class="headerlink" title="常见状态码"></a>常见状态码</h3><ul>
<li>200 OK</li>
<li>302 Found 暂时重定向</li>
<li>301 Move Permanently永久重定向</li>
<li>304 Not Modified 没有内容更新，使用缓存</li>
<li>400 Bad Request 客户端请求与语法错误</li>
<li>403 Forbidden 服务器拒绝提供服务</li>
<li>404 Not Found 请求资源不存在</li>
<li>500 Internal Server Error服务器发生了不可预期的错误</li>
<li>503 Server Unavailable 服务器当前不能处理客户端的请求，一段时间后可能恢复正常</li>
</ul>
<h2 id="HTTP-请求过程"><a href="#HTTP-请求过程" class="headerlink" title="HTTP 请求过程"></a>HTTP 请求过程</h2><p>一个完整的HTTP请求过程如下：</p>
<ol>
<li>用户在浏览器输入URL</li>
<li>域名解析（DNS的寻址）</li>
<li>TCP三次握手</li>
<li>握手成功后建立TCP通道，发起HTTP请求</li>
<li>服务器响应HTTP请求，返回对应的响应报文</li>
<li>客户端开始解析渲染</li>
</ol>
<h2 id="URL-和-URI"><a href="#URL-和-URI" class="headerlink" title="URL 和 URI"></a>URL 和 URI</h2><ul>
<li>URI：统一资源标识符</li>
<li>URL：统一资源定位符</li>
</ul>
<p>URI是一个用于标识互联网资源名称的字符串，最常见的形式是统一资源定位符（URL），经常指定为非正式的网址。更罕见的用法是统一资源名称（URN），其目的是通过提供一种途径。用于在特定的命名空间资源的标识，以补充网址。</p>
<p>即URL和URN 都是 URI的子集，URI是一种抽象的概念，URL是URI的一种常见的具象表达形式。</p>
<h2 id="缩放图片避免内存消耗过大"><a href="#缩放图片避免内存消耗过大" class="headerlink" title="缩放图片避免内存消耗过大"></a>缩放图片避免内存消耗过大</h2><p>原有缩放方法如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (UIImage *)scaleImage:(UIImage *)image newSize:(CGSize)newSize &#123;</span><br><span class="line">   UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);</span><br><span class="line">   [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];</span><br><span class="line">   UIImage *newImage &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">   UIGraphicsEndImgeContext();</span><br><span class="line">   </span><br><span class="line">   return newImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>处理大分辨率图片时，往往容易出现OOM，原因是-[UIImage drawInRect:]在绘制时，先解码图片，再生成原始分辨率大小的bitmap，这是很耗内存的。解决方法是使用更低层的ImageIO接口，避免中间bitmap产生。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+ (UIImage *)scaledImageWithData:(NSData *)data withSize:(CGSize)size scale:(CGFloat)scale orientation:(UIImageOrientation)orientation &#123;</span><br><span class="line">   CGFloat maxPixelSize &#x3D; MAX(size.width, size.height);</span><br><span class="line">   CGImageSourceRef sourceRef &#x3D; CGImageSourceCreateWithData((__bridge CFDataRef)data, nil);</span><br><span class="line">   NSDictionary *options &#x3D; @&#123;(__bridge id)kCGImageSourceThumnailFromImageAlways:(__bridge id)kCFBooleanTrue,</span><br><span class="line">   (__bridge id)kCGImageSourceThumbnailMaxPixelSize:[NSNumber numberWithFloat:maxPixelSize]&#125;;</span><br><span class="line">   </span><br><span class="line">   CGImageRef imageRef &#x3D; CGImageSourceCreateThumnailAtIndex(sourceRef, 0, (__bridge CFDictionaryRef)options);</span><br><span class="line">   UIImage *resultImage &#x3D; [UIImage imageWithCGImage:imageRef scale:scale orientation:orientation];</span><br><span class="line">   CGImageRelease(imageRef);</span><br><span class="line">   CFRelease(sourceRef);</span><br><span class="line">   </span><br><span class="line">   return resultImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="LocationManager-Combine-Version"><a href="#LocationManager-Combine-Version" class="headerlink" title="LocationManager - Combine Version"></a>LocationManager - Combine Version</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CoreLocation</span><br><span class="line"><span class="keyword">import</span> MapKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LocationManager</span>: <span class="title">NSObject</span>, <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> locationManager <span class="operator">=</span> <span class="type">CLLocationManager</span>()</span><br><span class="line">  <span class="meta">@Published</span> <span class="keyword">var</span> region: <span class="type">MKCoordinateRegion</span></span><br><span class="line">  <span class="meta">@Published</span> <span class="keyword">var</span> authorized <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">init</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> place <span class="operator">=</span> <span class="type">WondersOfTheWorld</span>().places.randomElement() <span class="operator">??</span> <span class="type">WondersOfTheWorld</span>().places[<span class="number">0</span>]</span><br><span class="line">    region <span class="operator">=</span> <span class="type">MKCoordinateRegion</span>(center: place.location.coordinate, latitudinalMeters: <span class="number">1000</span>, longitudinalMeters: <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    locationManager.delegate <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">    locationManager.desiredAccuracy <span class="operator">=</span> kCLLocationAccuracyBest</span><br><span class="line">    <span class="keyword">if</span> locationManager.authorizationStatus <span class="operator">==</span> .authorizedWhenInUse &#123;</span><br><span class="line">      authorized <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">      locationManager.startUpdatingLocation()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">requestAuthorization</span>()</span> &#123;</span><br><span class="line">    locationManager.requestWhenInUseAuthorization()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - CLLocationManagerDelegate</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LocationManager</span>: <span class="title">CLLocationManagerDelegate</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">locationManagerDidChangeAuthorization</span>(<span class="keyword">_</span> <span class="params">manager</span>: <span class="type">CLLocationManager</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> locationManager.authorizationStatus <span class="operator">==</span> .authorizedWhenInUse &#123;</span><br><span class="line">      authorized <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">      locationManager.startUpdatingLocation()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">locationManager</span>(<span class="keyword">_</span> <span class="params">manager</span>: <span class="type">CLLocationManager</span>, <span class="params">didUpdateLocations</span> <span class="params">locations</span>: [<span class="type">CLLocation</span>])</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> latest <span class="operator">=</span> locations.first <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    region <span class="operator">=</span> <span class="type">MKCoordinateRegion</span>.<span class="keyword">init</span>(center: latest.coordinate, latitudinalMeters: <span class="number">1000</span>, longitudinalMeters: <span class="number">1000</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Region: <span class="subst">\(region)</span>&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">locationManager</span>(<span class="keyword">_</span> <span class="params">manager</span>: <span class="type">CLLocationManager</span>, <span class="params">didFailWithError</span> <span class="params">error</span>: <span class="type">Error</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> clError <span class="operator">=</span> error <span class="keyword">as?</span> <span class="type">CLError</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> clError &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">CLError</span>.denied:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Access denied&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;LocationManager didFailWithError: <span class="subst">\(clError.localizedDescription)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><blockquote>
<p> 使用preconditionFailure（_：file：line :)或fatalError（_：file：line :)而不是assertionFailure（_：file：line :)可以使您的应用在release配置下崩溃。</p>
</blockquote>
<p>Ref: <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/91213ee3cecf">https://www.jianshu.com/p/91213ee3cecf</a></p>
<h2 id="字符串国际化中，格式化字符串多参数位置调整"><a href="#字符串国际化中，格式化字符串多参数位置调整" class="headerlink" title="字符串国际化中，格式化字符串多参数位置调整"></a>字符串国际化中，格式化字符串多参数位置调整</h2><p>e.g.</p>
<p>/* Message in alert dialog when something fails */</p>
<p>“%@ Error! %@ failed!” = “%2$@ blah blah, %1$@ blah!”;</p>
<p>上例中，两个参数在翻译后的字符串中，前后位置调换。</p>
<h2 id="使用-xib-时的-AutolLayout-和-frame-设置"><a href="#使用-xib-时的-AutolLayout-和-frame-设置" class="headerlink" title="使用 xib 时的 AutolLayout 和 frame 设置"></a>使用 xib 时的 AutolLayout 和 frame 设置</h2><p>开起AutoLayout后</p>
<p>方法调用顺序：viewDidLoad -&gt; viewWillLayoutSubviews（这个函数在执行时加载文件对应的xib中设置的约束）-&gt; viewDidLayoutSubviews</p>
<p>因此在viewDidLoad和viewWillLayoutSubviews中设置frame都是无效的，frame会在加载layout约束时重新计算。</p>
<p>想要更改frame有两个方法：</p>
<ol>
<li>在viewDidLayoutSubviews中设置frame；</li>
<li>将约束control-drag到代码中，通过IBOutlet设置对应属性。通过这个方式可以在viewDidLoad和viewWillLayoutSubviews中进行设置。</li>
</ol>
<blockquote>
<p> Tip：如果要对frame进行修改并产生动画，需要在动画block内的代码块最后调用[被修改frame的view.super layoutIfNeeded];</p>
</blockquote>
<h2 id="用-NSKeyedArchiver-和-NSKeyedUnarchiver-实现多层数据结构的完全复制"><a href="#用-NSKeyedArchiver-和-NSKeyedUnarchiver-实现多层数据结构的完全复制" class="headerlink" title="用 NSKeyedArchiver 和 NSKeyedUnarchiver 实现多层数据结构的完全复制"></a>用 NSKeyedArchiver 和 NSKeyedUnarchiver 实现多层数据结构的完全复制</h2><h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *str1 &#x3D; @“1”;</span><br><span class="line">NSMutableString *str2 &#x3D; @“2”;</span><br><span class="line"></span><br><span class="line">NSMutabelArray *arr1 &#x3D; [NSMutableArray arrayWithObjects:str1, str2, nil];</span><br><span class="line">NSMutableArray *arr2 &#x3D; [NSMutableArray arrayWithObjects:str1, str2, arr1, nil];</span><br><span class="line"></span><br><span class="line">NSMutableArray *arr3 &#x3D; [[NSMutableArray alloc] initWithArray:arr2 copyItems:YES];</span><br><span class="line"></span><br><span class="line">NSMutableString *str3 &#x3D; [arr1 objectAtIndex:0];</span><br><span class="line">[str3 appendString:@“1”];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;arrM2--%@&quot;,arrM2);</span><br><span class="line">NSLog(@&quot;arrM3--%@&quot;,arrM3);</span><br></pre></td></tr></table></figure>

<h3 id="结果："><a href="#结果：" class="headerlink" title="结果："></a>结果：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">2017-03-14 00:55:57.604 深复制和完全复制[6080:438490] arrM2--(</span><br><span class="line">    11,</span><br><span class="line">    2,</span><br><span class="line">        (</span><br><span class="line">        11,</span><br><span class="line">        2</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">2017-03-14 00:55:57.606 深复制和完全复制[6080:438490] arrM3--(</span><br><span class="line">    1,</span><br><span class="line">    2,</span><br><span class="line">        (</span><br><span class="line">        11,</span><br><span class="line">        2</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>外层数据深拷贝，内层数据依然是浅拷贝（只拷贝指针）。</p>
<h3 id="修复："><a href="#修复：" class="headerlink" title="修复："></a>修复：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray *arr3 &#x3D; [NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:arr2]];</span><br></pre></td></tr></table></figure>



<h2 id="ARC-MRC-引用计数模式设置"><a href="#ARC-MRC-引用计数模式设置" class="headerlink" title="ARC - MRC 引用计数模式设置"></a>ARC - MRC 引用计数模式设置</h2><p>Project设置 -&gt; Build Settings -&gt; Apple LLVM x.x - Language - Objective C -&gt; Weak References in Manual Retain Release: </p>
<p>NO: MRC</p>
<p>YES: ARC</p>
<h2 id="tintColorDidChange"><a href="#tintColorDidChange" class="headerlink" title="tintColorDidChange"></a>tintColorDidChange</h2><p>当弹出一个alert或者action sheet时，iOS7会自动将后面视图的tint color变暗。此时，我们可以在自定义视图中重写tintColorDidChange方法来执行我们想要的操作。</p>
<h2 id="UIView-不能接受事件处理的情况"><a href="#UIView-不能接受事件处理的情况" class="headerlink" title="UIView 不能接受事件处理的情况"></a>UIView 不能接受事件处理的情况</h2><ol>
<li>alpha &lt; 0.01</li>
<li>userInteractionEnable = NO</li>
<li>hidden = YES</li>
</ol>
<h2 id="如何重写自己的-hash-方法"><a href="#如何重写自己的-hash-方法" class="headerlink" title="如何重写自己的 hash 方法"></a>如何重写自己的 hash 方法</h2><p>hash方法是NSObject中声明的，默认实现是返回对象的内存地址。</p>
<p>那么hash方法的最佳实践到底是什么呢?<br> 大神<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://nshipster.com/authors/mattt-thompson/">Mattt Thompson</a>在<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://nshipster.com/equality/">Equality</a>中给出的结论就是</p>
<p>In reality, a simple XOR over the hash values of critical properties is sufficient 99% of the time(对关键属性的hash值进行位异或运算作为hash值)</p>
<p>比如对于Person类的hash方法实现如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (NSUInteger)hash &#123;</span><br><span class="line">  </span><br><span class="line">   return [self.name hash] ^ [self.birthday hash];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="xib-动画"><a href="#xib-动画" class="headerlink" title="xib 动画"></a>xib 动画</h2><p>Xib中的控件，通过约束更改尺寸/位置等属性后，需要调用控件的父视图的layoutIfNeed方法。</p>
<p>如果是使用UIView的animateWith…动画方法，需要在动画block内部的最后调用该方法。</p>
<h2 id="ios-开发-loaded-the-“ViewController”-nib-but-the-view-outlet-was-not-set-’"><a href="#ios-开发-loaded-the-“ViewController”-nib-but-the-view-outlet-was-not-set-’" class="headerlink" title="ios 开发 loaded the “ViewController” nib but the view outlet was not set.’"></a>ios 开发 loaded the “ViewController” nib but the view outlet was not set.’</h2><p>遇到loaded the “ViewController” nib but the view outlet was not set.’时，解决办法为：<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_8f38d3410101a1rb.html%EF%BC%8C%E9%9C%80%E8%A6%81%E5%B0%86Files&#39;s">http://blog.sina.com.cn/s/blog_8f38d3410101a1rb.html，需要将Files&#39;s</a> Owner中的view变量做一下关联。</p>
<p>但是，有时候做关联时并没有看到view变量，这时，需要设置一下Files’s Owner的class，之后就可以做关联了。详情参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10750082/loaded-the-controller-nib-but-the-view-outlet-was-not-set">https://stackoverflow.com/questions/10750082/loaded-the-controller-nib-but-the-view-outlet-was-not-set</a></p>
<h2 id="How-to-avoid-clipboard-warning-as-possibly-as-you-can"><a href="#How-to-avoid-clipboard-warning-as-possibly-as-you-can" class="headerlink" title="How to avoid clipboard warning as possibly as you can"></a>How to avoid clipboard warning as possibly as you can</h2><p>Always check <strong>UIPasteboard.hasStrings</strong> before reading <strong>UIPasteboard.string</strong>, you can <strong>potentially</strong> save one clipboard warning.</p>
<p>——from ying Chong</p>
<h2 id="怎么使用-GeometryReader-传入的-GeometryProxy-类型的参数，又不会因为在视图层级中加入-GeometryReader-导致占用了全部的可用屏幕空间，导致布局出现错误。"><a href="#怎么使用-GeometryReader-传入的-GeometryProxy-类型的参数，又不会因为在视图层级中加入-GeometryReader-导致占用了全部的可用屏幕空间，导致布局出现错误。" class="headerlink" title="怎么使用 GeometryReader 传入的 GeometryProxy 类型的参数，又不会因为在视图层级中加入 GeometryReader 导致占用了全部的可用屏幕空间，导致布局出现错误。"></a>怎么使用 GeometryReader 传入的 GeometryProxy 类型的参数，又不会因为在视图层级中加入 GeometryReader 导致占用了全部的可用屏幕空间，导致布局出现错误。</h2><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxgunt0cmj30ay07taa2.jpg"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Graph</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> width <span class="operator">=</span> <span class="type">UIScreen</span>.main.bounds.width <span class="comment">// just initial constant</span></span><br><span class="line">  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">      <span class="type">HStack</span>(spacing: <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">Color</span>.red.frame(width: width <span class="operator">/</span> <span class="number">3</span>, height: <span class="number">80</span>)</span><br><span class="line">        <span class="type">Color</span>.blue.frame(width: width <span class="operator">/</span> <span class="number">3</span>, height: <span class="number">120</span>)</span><br><span class="line">        <span class="type">Color</span>.green.frame(width: width <span class="operator">/</span> <span class="number">3</span>, height: <span class="number">180</span>)</span><br><span class="line">      &#125;.background(<span class="type">GeometryReader</span> &#123; gp -&gt; <span class="type">Color</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> frame <span class="operator">=</span> gp.frame(in: .local)</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            <span class="keyword">self</span>.width <span class="operator">=</span> frame.size.width <span class="comment">// &lt;&lt; dynamic, on layout !!</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Color</span>.clear</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="收到键盘通知后自动调整-scrollview-的-contentOffset"><a href="#收到键盘通知后自动调整-scrollview-的-contentOffset" class="headerlink" title="收到键盘通知后自动调整 scrollview 的 contentOffset"></a>收到键盘通知后自动调整 scrollview 的 contentOffset</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (void)keyboardWillShow:(NSNotification *)notification</span><br><span class="line">&#123;</span><br><span class="line">    NSDictionary *info &#x3D; [notification userInfo];</span><br><span class="line">    CGFloat kbH &#x3D; [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size.height;</span><br><span class="line">    NSIndexPath *indexPath &#x3D; [NSIndexPath indexPathForRow:self.classes.count inSection:0];</span><br><span class="line">    CGRect p &#x3D; [self.baseTableView rectForRowAtIndexPath:indexPath];</span><br><span class="line">    CGRect rectInSelfview &#x3D; [self.baseTableView convertRect:p toView:self.view];</span><br><span class="line">    CGFloat cellBottomY &#x3D; rectInSelfview.origin.y + rectInSelfview.size.height;</span><br><span class="line">    </span><br><span class="line">    if (cellBottomY &lt; kbH) &#123;</span><br><span class="line">        </span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [UIView animateWithDuration:0.2 animations:^&#123;</span><br><span class="line">        </span><br><span class="line">        self.baseTableView.contentOffset &#x3D; CGPointMake(0, cellBottomY - (self.baseTableView.height - kbH));</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="避免锁死Tip"><a href="#避免锁死Tip" class="headerlink" title="避免锁死Tip"></a>避免锁死Tip</h1><ol>
<li><p>dispatch_once 中不要有同步到主线程执行的方法。</p>
</li>
<li><p>CTTelephonyNetworkInfo 最好在 +load方法或者 main 方法之前的其他时机提前初始化一个共享的实例，避免踩到子线程懒加载时候要求主线程同步响应的坑。</p>
</li>
<li><p>有可能存在锁竞争的代码尽量不在主线程同步执行。</p>
</li>
<li><p>如果主线程与子线程不可避免的存在竞争时，加锁的粒度要尽量小，操作要尽量轻。、</p>
</li>
<li><p>数据库读写，文件压缩/解压缩等磁盘 IO 行为不放在主线程执行。</p>
</li>
<li><p>如果存在主线程将任务同步到串行队列中执行的场景，确保这些任务不与子线程可能存在的耗时操作复用同一个串行队列。</p>
</li>
<li><p>对于一些启动阶段非必要同步加载并且有比较密集磁盘 IO 行为的 SDK，如各种支付分享等第三方 SDK 都可以延迟，错开加载。</p>
</li>
<li><p>NSUserDefaults 底层实现中存在直接或者间接的跨进程通信，在主线程同步调用容易发生卡死。➡️重度使用参考MMKV，轻度使用参考firebase自己写歌轻量的UserDefaults类</p>
</li>
<li><p>[[UIApplication sharedApplication] openURL]接口，内部实现也存在同步的跨进程通信。➡️iOS10 及以上的系统版本使用[[UIApplication sharedApplication] openURL:options:completionHandler:]这个接口替换，此接口可以异步调起，不会造成卡死。</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/App-Store-%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96%E7%BD%91%E5%9D%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/App-Store-%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96%E7%BD%91%E5%9D%80/" class="post-title-link" itemprop="url">App Store 隐私政策网址</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:17:13 / 修改时间：03:18:07" itemprop="dateCreated datePublished" datetime="2021-04-06T03:17:13+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本软件尊重并保护所有使用服务用户的个人隐私权。为了给您提供更准确、更有个性化的服务，本软件会按照本隐私权政策的规定使用和披露您的个人信息。但本软件将以高度的勤勉、审慎义务对待这些信息。除本隐私权政策另有规定外，在未征得您事先许可的情况下，本软件不会将这些信息对外披露或向第三方提供。本软件会不时更新本隐私权政策。您在同意本软件服务使用协议之时，即视为您已经同意本隐私权政策全部内容。本隐私权政策属于本软件服务使用协议不可分割的一部分。</p>
<ol>
<li><p>适用范围</p>
<p>a) 在您使用本软件网络服务，本软件自动接收并记录的您的手机上的信息，包括但不限于您的健康数据、使用的语言、访问日期和时间、软硬件特征信息及您需求的网页记录等数据；</p>
</li>
<li><p>信息的使用</p>
<p>a)在获得您的数据之后，本软件会将其上传至服务器，以生成您的排行榜数据，以便您能够更好地使用服务。</p>
</li>
<li><p>信息披露</p>
<p>a)本软件不会将您的信息披露给不受信任的第三方。</p>
<p>b)根据法律的有关规定，或者行政或司法机构的要求，向第三方或者行政、司法机构披露；</p>
<p>c)如您出现违反中国有关法律、法规或者相关规则的情况，需要向第三方披露；</p>
</li>
<li><p>信息存储和交换</p>
<p>本软件收集的有关您的信息和资料将保存在本软件及（或）其关联公司的服务器上，这些信息和资料可能传送至您所在国家、地区或本软件收集信息和资料所在地的境外并在境外被访问、存储和展示。</p>
</li>
<li><p>信息安全</p>
<p>a)在使用本软件网络服务进行网上交易时，您不可避免的要向交易对方或潜在的交易对方披露自己的个人信息，如联络方式或者邮政地址。请您妥善保护自己的个人信息，仅在必要的情形下向他人提供。如您发现自己的个人信息泄密，请您立即联络本软件客服，以便本软件采取相应措施。</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/terminalTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/terminalTips/" class="post-title-link" itemprop="url">terminalTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:16:22 / 修改时间：03:16:39" itemprop="dateCreated datePublished" datetime="2021-04-06T03:16:22+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Terminal-Tips"><a href="#Terminal-Tips" class="headerlink" title="Terminal Tips"></a>Terminal Tips</h1><h2 id="常用系统命令"><a href="#常用系统命令" class="headerlink" title="常用系统命令"></a>常用系统命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now // 重启</span><br><span class="line">shutdown now    // 关机</span><br><span class="line"></span><br><span class="line">pmset -g                   // 显示电源管理设置信息</span><br><span class="line">sudo pmset displaysleep 15 // 设置显示器无活动15分钟后关闭</span><br><span class="line">sudo pmset sleep 30        // 计算机无活动30分钟后休眠</span><br></pre></td></tr></table></figure>



<h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><ol>
<li>Command + L：清空一行</li>
<li>Command + K：清空全部</li>
</ol>
<h2 id="使用-sudo-快速执行上一条命令"><a href="#使用-sudo-快速执行上一条命令" class="headerlink" title="使用 sudo 快速执行上一条命令"></a>使用 sudo 快速执行上一条命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo !!</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果由于你忘了使用sudo而导致命令行返回一个错误，只需输入sudo !!就可以用sudo来执行上一条指令。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/macOSTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/macOSTips/" class="post-title-link" itemprop="url">macOSTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:15:49 / 修改时间：03:16:07" itemprop="dateCreated datePublished" datetime="2021-04-06T03:15:49+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="macOS-Tips"><a href="#macOS-Tips" class="headerlink" title="macOS Tips"></a>macOS Tips</h1><h2 id="macOS-安全验证工具链中添加-Touch-ID-验证"><a href="#macOS-安全验证工具链中添加-Touch-ID-验证" class="headerlink" title="macOS 安全验证工具链中添加 Touch ID 验证"></a>macOS 安全验证工具链中添加 Touch ID 验证</h2><blockquote>
<p>TIL, macOS 在 /etc/pam.d/sudo 里面增加一行 auth sufficient pam_tid.so 可以给 sudo 加上 TouchID 验证</p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxdm0k6iyj30b103ywfl.jpg"></p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxdmk2iy6j30uu0e0q5i.jpg"></p>
<h2 id="macOS-的-mds-stores-导致应用程序内存不足的故障解决记录"><a href="#macOS-的-mds-stores-导致应用程序内存不足的故障解决记录" class="headerlink" title="macOS 的 mds_stores 导致应用程序内存不足的故障解决记录"></a>macOS 的 mds_stores 导致应用程序内存不足的故障解决记录</h2><p>Apple的产品专家两三个小时后给我回电了，提供了解决办法，并将解决方法发送到了我的邮箱。 我猜这个方法应该更可靠，适合当前版本（macOS High Sierra 10.13.1），如下：</p>
<p>您可以尝试以下方案： </p>
<p>1）在终端中键入命令 <code>&quot;sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist”</code> </p>
<p>2）完成后重启电脑 3）确认您的电脑未开启 Time Machine，功能的情况下，执行以下重建命令：</p>
<p><code>sudo mdutil -i off</code> // &lt;press [return]&gt;</p>
<p><code>sudo mdutil -E</code> // &lt;press [return]&gt; </p>
<p><code>sudo mdutil -i on</code> // &lt;press [return]&gt;</p>
<p> 需要等待完成重建，完成后再尝试确认是否可以解决。</p>
<h2 id="Youtube-download"><a href="#Youtube-download" class="headerlink" title="Youtube-download"></a>Youtube-download</h2><ol>
<li><p>安装youtube-dl</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install youtube-dl</span><br></pre></td></tr></table></figure></li>
<li><p>安装you-get</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install you-get</span><br></pre></td></tr></table></figure></li>
</ol>
<p>那么需要安装的ffmpeg的库该如何安装呢？可以参看这个仓库：</p>
<ul>
<li>​        <a target="_blank" rel="noopener" href="https://www.luckydesigner.space/wp-content/themes/begin5.2/inc/go.php?url=https://github.com/holzschu/a-Shell-commands">https://github.com/holzschu/a-Shell-commands</a></li>
</ul>
<p>点击对应的链接下载，或者直接点击下载这个链接：</p>
<ul>
<li>​        <a target="_blank" rel="noopener" href="https://www.luckydesigner.space/wp-content/themes/begin5.2/inc/go.php?url=https://github.com/holzschu/a-Shell-commands/releases/download/0.1/ffmpeg.wasm">https://github.com/holzschu/a-Shell-commands/releases/download/0.1/ffmpeg.wasm</a></li>
</ul>
<p>之后打开文件这个app——File App，就会看到它已经在Download这个文件夹里面了，先留着备用。</p>
<p>然后前往ipad本机，选择a-Shell文件夹，进入后新建一个名为bin的文件夹，如下图所示。</p>
<p>然后将那个备用的”ffmpeg.wasm”文件，转移到该文件夹即可。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>这样就可以实现下载视频，音频，图片之类的了。</p>
<p>比如下载小鸡小鸡歌曲，只需要输入以下代码即可：</p>
<p><code>youtube-dl &quot;ytsearch:小鸡小鸡&quot;</code></p>
<p>下载完成后，就到File App里面的A-shell查看就可以了，如下图所示。</p>
<h2 id="删除-App-的代码签名（以避免-OCSP-在签名证书校验时通过-http-80-明文发送哈希）"><a href="#删除-App-的代码签名（以避免-OCSP-在签名证书校验时通过-http-80-明文发送哈希）" class="headerlink" title="删除 App 的代码签名（以避免 OCSP 在签名证书校验时通过 http:80 明文发送哈希）"></a>删除 App 的代码签名（以避免 OCSP 在签名证书校验时通过 http:80 明文发送哈希）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">codesign --remove-signature foo.app</span><br><span class="line">codesign --remove-signature &lt;#your app’s path#&gt;</span><br></pre></td></tr></table></figure>



<h2 id="If-you-don’t-like-Big-Sur’s-new-title-style-and-want-to-revert-to-how-it-looks-in-Catalina"><a href="#If-you-don’t-like-Big-Sur’s-new-title-style-and-want-to-revert-to-how-it-looks-in-Catalina" class="headerlink" title="If you don’t like Big Sur’s new title style and want to revert to how it looks in Catalina:"></a>If you don’t like Big Sur’s new title style and want to revert to how it looks in Catalina:</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write -g NSWindowSupportsAutomaticInlineTitle -bool false</span><br></pre></td></tr></table></figure>

<p>and relaunch Finder.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/iosDevTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/iosDevTips/" class="post-title-link" itemprop="url">iosDevTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:14:07 / 修改时间：03:14:55" itemprop="dateCreated datePublished" datetime="2021-04-06T03:14:07+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="如何解决无法删除苹果开发者证书"><a href="#如何解决无法删除苹果开发者证书" class="headerlink" title="如何解决无法删除苹果开发者证书"></a>如何解决无法删除苹果开发者证书</h2><blockquote>
<p>I also faced the same issue today. The following steps fixed my issue.</p>
<ol>
<li>Download <a target="_blank" rel="noopener" href="https://developer.apple.com/certificationauthority/AppleWWDRCA.cer">https://developer.apple.com/certificationauthority/AppleWWDRCA.cer</a></li>
<li>Double-click to install to Keychain.</li>
<li>Then in Keychain, Select View -&gt; “Show Expired Certificates” in Keychain app.</li>
<li>It will list all the expired certifcates.</li>
<li>Delete “Apple Worldwide Developer Relations Certificate Authority certificates” from “login” tab</li>
<li>And also delete it from “System” tab.</li>
</ol>
<p>Now you are ready go.</p>
</blockquote>
<h2 id="jenkins-配置安全策略admin没有Overall-Read权限"><a href="#jenkins-配置安全策略admin没有Overall-Read权限" class="headerlink" title="jenkins 配置安全策略admin没有Overall/Read权限"></a><strong>jenkins</strong> 配置安全策略<strong>admin</strong>没有<strong>Overall/Read</strong>权限</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/myNameIssls/article/details/70227838">https://blog.csdn.net/myNameIssls/article/details/70227838</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangmuming/article/details/22925987">https://blog.csdn.net/wangmuming/article/details/22925987</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/03/31/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/31/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">代码质量总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-03-31 08:08:07 / 修改时间：09:03:19" itemprop="dateCreated datePublished" datetime="2021-03-31T08:08:07+00:00">2021-03-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="代码设计原则"><a href="#代码设计原则" class="headerlink" title="代码设计原则"></a>代码设计原则</h2><ol>
<li><p>Catch 内尽量简洁</p>
<p>只做log和保护性操作（e.g. 回滚）</p>
</li>
<li><p>assert中的condition一般在assert后会通过if进行过滤</p>
</li>
</ol>
<h2 id="代码认知复杂度-Cognitive-Complexity"><a href="#代码认知复杂度-Cognitive-Complexity" class="headerlink" title="代码认知复杂度 Cognitive Complexity"></a>代码认知复杂度 Cognitive Complexity</h2><ol>
<li><p>避免多层嵌套</p>
<ol>
<li>提前退出（guard else return）</li>
</ol>
</li>
<li><p>条件判断避免多条并列（if A &amp;&amp; B &amp;&amp; C）</p>
</li>
<li><p>分支条件避免同一级ifelse判断条件不一致</p>
<p>e.g. </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ❌</span></span><br><span class="line"><span class="keyword">if</span> <span class="type">A</span> <span class="operator">&amp;&amp;</span> <span class="type">B</span> &#123;</span><br><span class="line">   <span class="comment">// statement a</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="operator">!</span><span class="type">A</span> &#123;</span><br><span class="line">   <span class="comment">// statement b</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ✅</span></span><br><span class="line"><span class="keyword">if</span> <span class="type">A</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> <span class="type">B</span> &#123;</span><br><span class="line">      <span class="comment">// statement a</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="comment">// statement b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/03/31/Xcode-Tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/31/Xcode-Tips/" class="post-title-link" itemprop="url">Xcode Tips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-03-31 04:47:43 / 修改时间：04:48:08" itemprop="dateCreated datePublished" datetime="2021-03-31T04:47:43+00:00">2021-03-31</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Xcode-Tips"><a href="#Xcode-Tips" class="headerlink" title="Xcode Tips"></a>Xcode Tips</h1><h2 id="在-Xcode-活跃视图显示构建时间"><a href="#在-Xcode-活跃视图显示构建时间" class="headerlink" title="在 Xcode 活跃视图显示构建时间"></a>在 Xcode 活跃视图显示构建时间</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dt.Xcode ShowBuildOperationDuration -bool YES</span><br></pre></td></tr></table></figure>



<h2 id="防止-Xcode-崩溃后，再次打开时打开崩溃前的所有工程"><a href="#防止-Xcode-崩溃后，再次打开时打开崩溃前的所有工程" class="headerlink" title="防止 Xcode 崩溃后，再次打开时打开崩溃前的所有工程"></a>防止 Xcode 崩溃后，再次打开时打开崩溃前的所有工程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dt.Xcode ApplePersistenceIgnoreState -bool YES</span><br></pre></td></tr></table></figure>



<h2 id="Make-Xcode’s-Assistant-aware-of-your-ViewModels-Views-etc"><a href="#Make-Xcode’s-Assistant-aware-of-your-ViewModels-Views-etc" class="headerlink" title="Make Xcode’s Assistant aware of your ViewModels, Views, etc"></a>Make Xcode’s Assistant aware of your ViewModels, Views, etc</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dt.Xcode IDEAdditionalCounterpartSuffixes -array-add &quot;ViewModel&quot; &quot;View&quot; &quot;Screen&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>You can check the current value of this default using defaults read com.apple.dt.Xcode IDEAdditionalCounterpartSuffixes.</p>
</blockquote>
<h2 id="Xcode-重构时，rename功能关闭代码折叠动画（duration设为0）"><a href="#Xcode-重构时，rename功能关闭代码折叠动画（duration设为0）" class="headerlink" title="Xcode 重构时，rename功能关闭代码折叠动画（duration设为0）"></a>Xcode 重构时，rename功能关闭代码折叠动画（duration设为0）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dt.Xcode CodeFoldingAnimationSpeed -int 0</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>






<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lex</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
