<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ryotrix.dev","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://ryotrix.dev/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Lex">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://ryotrix.dev/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<title>Hexo</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">11</span></a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Lex</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/05/14/GeneralDevSnippetsAndTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/14/GeneralDevSnippetsAndTips/" class="post-title-link" itemprop="url">GeneralDevSnippetsAndTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-14 17:30:30" itemprop="dateCreated datePublished" datetime="2021-05-14T17:30:30+00:00">2021-05-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-21 09:02:57" itemprop="dateModified" datetime="2021-07-21T09:02:57+00:00">2021-07-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="开发通用常用代码块和知识点"><a href="#开发通用常用代码块和知识点" class="headerlink" title="开发通用常用代码块和知识点"></a>开发通用常用代码块和知识点</h2><blockquote>
<p>部分来源</p>
</blockquote>
<h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><h4 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h4><ol>
<li><p>向远程 Repository 添加 tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag -m <span class="string">&quot;注释内容&quot;</span> 0.0.1</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure></li>
<li><p>删除本地 tag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag --delete [TagName]</span><br></pre></td></tr></table></figure>

<p>e.g.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag --delete 0.0.1</span><br></pre></td></tr></table></figure></li>
<li><p>删除远程 tag</p>
<blockquote>
<p>如果删除 tag 后，想重新打一个相同的 tag，需要先删除本地的 tag，否则会失败。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --delete origin [TagName]</span><br></pre></td></tr></table></figure>

<p>e.g.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --delete origin 0.0.1</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/05/07/iOSErrorCodeList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/05/07/iOSErrorCodeList/" class="post-title-link" itemprop="url">iOSErrorCodeList</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-07 17:20:50" itemprop="dateCreated datePublished" datetime="2021-05-07T17:20:50+00:00">2021-05-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-21 09:02:57" itemprop="dateModified" datetime="2021-07-21T09:02:57+00:00">2021-07-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="iOSErrorCodeList"><a href="#iOSErrorCodeList" class="headerlink" title="iOSErrorCodeList"></a>iOSErrorCodeList</h1><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-1 <code>NSURLErrorUnknown</code></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">1 <code>kCFHostErrorHostNotFound</code></td>
<td align="left">Indicates that the DNS lookup failed.</td>
</tr>
<tr>
<td align="left">2 <code>kCFHostErrorUnknown</code></td>
<td align="left">An unknown error occurred (a name server failure, for example). For additional information, query the kCFGetAddrInfoFailureKey to get the value returned from getaddrinfo; lookup in netdb.h</td>
</tr>
<tr>
<td align="left">100 <code>kCFSOCKSErrorUnknownClientVersion</code></td>
<td align="left">The SOCKS server rejected access because it does not support connections with the requested SOCKS version.Query kCFSOCKSStatusCodeKey to recover the status code returned by the server.</td>
</tr>
<tr>
<td align="left">101 <code>kCFSOCKSErrorUnsupportedServerVersion</code></td>
<td align="left">The version of SOCKS requested by the server is not supported. Query kCFSOCKSStatusCodeKey to recover the status code returned by the server.  Query the kCFSOCKSVersionKey to find the version requested by the server.</td>
</tr>
</tbody></table>
<h2 id="Sock4-Errors"><a href="#Sock4-Errors" class="headerlink" title="Sock4 Errors"></a>Sock4 Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">110 <code>kCFSOCKS4ErrorRequestFailed</code></td>
<td align="left">Request rejected or failed by the server.</td>
</tr>
<tr>
<td align="left">111 <code>kCFSOCKS4ErrorIdentdFailed</code></td>
<td align="left">Request rejected because SOCKS server cannot connect to identd on the client.</td>
</tr>
<tr>
<td align="left">112 <code>kCFSOCKS4ErrorIdConflict</code></td>
<td align="left">Request rejected because the client program and identd report different user-ids.</td>
</tr>
<tr>
<td align="left">113 <code>kCFSOCKS4ErrorUnknownStatusCode</code></td>
<td align="left">The status code returned by the server is unknown.</td>
</tr>
</tbody></table>
<h2 id="Socks5-Errors"><a href="#Socks5-Errors" class="headerlink" title="Socks5 Errors"></a>Socks5 Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">120 <code>kCFSOCKS5ErrorBadState</code></td>
<td align="left">The stream is not in a state that allows the requested operation.</td>
</tr>
<tr>
<td align="left">121 <code>kCFSOCKS5ErrorBadResponseAddr</code></td>
<td align="left">The address type returned is not supported.</td>
</tr>
<tr>
<td align="left">122 <code>kCFSOCKS5ErrorBadCredentials</code></td>
<td align="left">The SOCKS server refused the client connection because of bad login credentials.</td>
</tr>
<tr>
<td align="left">123 <code>kCFSOCKS5ErrorUnsupportedNegotiationMethod</code></td>
<td align="left">The requested method is not supported. Query kCFSOCKSNegotiationMethodKey to find the method requested.</td>
</tr>
<tr>
<td align="left">124 <code>kCFSOCKS5ErrorNoAcceptableMethod</code></td>
<td align="left">The client and server could not find a mutually agreeable authentication method.</td>
</tr>
</tbody></table>
<h2 id="FTP-Errors"><a href="#FTP-Errors" class="headerlink" title="FTP Errors"></a>FTP Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">200 <code>kCFFTPErrorUnexpectedStatusCode</code></td>
<td align="left">The server returned an unexpected status code. Query the kCFFTPStatusCodeKey to get the status code returned by the server</td>
</tr>
</tbody></table>
<h2 id="HTTP-Errors"><a href="#HTTP-Errors" class="headerlink" title="HTTP Errors"></a>HTTP Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">300 <code>kCFErrorHTTPAuthenticationTypeUnsupported</code></td>
<td align="left">The client and server could not agree on a supported authentication type.</td>
</tr>
<tr>
<td align="left">301 <code>kCFErrorHTTPBadCredentials</code></td>
<td align="left">The credentials provided for an authenticated connection were rejected by the server.</td>
</tr>
<tr>
<td align="left">302 <code>kCFErrorHTTPConnectionLost</code></td>
<td align="left">The connection to the server was dropped. This usually indicates a highly overloaded server.</td>
</tr>
<tr>
<td align="left">303 <code>kCFErrorHTTPParseFailure</code></td>
<td align="left">The HTTP server response could not be parsed.</td>
</tr>
<tr>
<td align="left">304 <code>kCFErrorHTTPRedirectionLoopDetected</code></td>
<td align="left">Too many HTTP redirects occurred before reaching a page that did not redirect the client to another page. This usually indicates a redirect loop.</td>
</tr>
<tr>
<td align="left">305 <code>kCFErrorHTTPBadURL</code></td>
<td align="left">The requested URL could not be retrieved.</td>
</tr>
<tr>
<td align="left">306 <code>kCFErrorHTTPProxyConnectionFailure</code></td>
<td align="left">A connection could not be established to the HTTP proxy.</td>
</tr>
<tr>
<td align="left">307 <code>kCFErrorHTTPBadProxyCredentials</code></td>
<td align="left">The authentication credentials provided for logging into the proxy were rejected.</td>
</tr>
<tr>
<td align="left">308 <code>kCFErrorPACFileError</code></td>
<td align="left">An error occurred with the proxy autoconfiguration file.</td>
</tr>
<tr>
<td align="left">309 <code>kCFErrorPACFileAuth</code></td>
<td align="left">The authentication credentials provided by the proxy autoconfiguration file were rejected.</td>
</tr>
<tr>
<td align="left">310 <code>kCFErrorHTTPSProxyConnectionFailure</code></td>
<td align="left">A connection could not be established to the HTTPS proxy.</td>
</tr>
<tr>
<td align="left">311 <code>kCFStreamErrorHTTPSProxyFailureUnexpectedResponseToCONNECTMethod</code></td>
<td align="left">The HTTPS proxy returned an unexpected status code, such as a 3xx redirect.</td>
</tr>
</tbody></table>
<h2 id="CFURLConnection-amp-CFURLProtocol-Errors"><a href="#CFURLConnection-amp-CFURLProtocol-Errors" class="headerlink" title="CFURLConnection &amp; CFURLProtocol Errors"></a>CFURLConnection &amp; CFURLProtocol Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-998 <code>kCFURLErrorUnknown</code></td>
<td align="left">An unknown error occurred.</td>
</tr>
<tr>
<td align="left">-999 <code>kCFURLErrorCancelled</code> <code>NSURLErrorCancelled</code></td>
<td align="left">The connection was cancelled.</td>
</tr>
<tr>
<td align="left">-1000 <code>kCFURLErrorBadURL</code> <code>NSURLErrorBadURL</code></td>
<td align="left">The connection failed due to a malformed URL.</td>
</tr>
<tr>
<td align="left">-1001 <code>kCFURLErrorTimedOut</code> <code>NSURLErrorTimedOut</code></td>
<td align="left">The connection timed out.</td>
</tr>
<tr>
<td align="left">-1002 <code>kCFURLErrorUnsupportedURL</code> <code>NSURLErrorUnsupportedURL</code></td>
<td align="left">The connection failed due to an unsupported URL scheme.</td>
</tr>
<tr>
<td align="left">-1003 <code>kCFURLErrorCannotFindHost</code> <code>NSURLErrorCannotFindHost</code></td>
<td align="left">The connection failed because the host could not be found.</td>
</tr>
<tr>
<td align="left">-1004 <code>kCFURLErrorCannotConnectToHost</code> <code>NSURLErrorCannotConnectToHost</code></td>
<td align="left">The connection failed because a connection cannot be made to the host.</td>
</tr>
<tr>
<td align="left">-1005 <code>kCFURLErrorNetworkConnectionLost</code> <code>NSURLErrorNetworkConnectionLost</code></td>
<td align="left">The connection failed because the network connection was lost.</td>
</tr>
<tr>
<td align="left">-1006 <code>kCFURLErrorDNSLookupFailed</code> <code>NSURLErrorDNSLookupFailed</code></td>
<td align="left">The connection failed because the DNS lookup failed.</td>
</tr>
<tr>
<td align="left">-1007 <code>kCFURLErrorHTTPTooManyRedirects</code> <code>NSURLErrorHTTPTooManyRedirects</code></td>
<td align="left">The HTTP connection failed due to too many redirects.</td>
</tr>
<tr>
<td align="left">-1008 <code>kCFURLErrorResourceUnavailable</code> <code>NSURLErrorResourceUnavailable</code></td>
<td align="left">The connection’s resource is unavailable.</td>
</tr>
<tr>
<td align="left">-1009 <code>kCFURLErrorNotConnectedToInternet</code> <code>NSURLErrorNotConnectedToInternet</code></td>
<td align="left">The connection failed because the device is not connected to the internet.</td>
</tr>
<tr>
<td align="left">-1010 <code>kCFURLErrorRedirectToNonExistentLocation</code> <code>NSURLErrorRedirectToNonExistentLocation</code></td>
<td align="left">The connection was redirected to a nonexistent location.</td>
</tr>
<tr>
<td align="left">-1011 <code>kCFURLErrorBadServerResponse</code> <code>NSURLErrorBadServerResponse</code></td>
<td align="left">The connection received an invalid server response.</td>
</tr>
<tr>
<td align="left">-1012 <code>kCFURLErrorUserCancelledAuthentication</code> <code>NSURLErrorUserCancelledAuthentication</code></td>
<td align="left">The connection failed because the user cancelled required authentication.</td>
</tr>
<tr>
<td align="left">-1013 <code>kCFURLErrorUserAuthenticationRequired</code> <code>NSURLErrorUserAuthenticationRequired</code></td>
<td align="left">The connection failed because authentication is required.</td>
</tr>
<tr>
<td align="left">-1014 <code>kCFURLErrorZeroByteResource</code> <code>NSURLErrorZeroByteResource</code></td>
<td align="left">The resource retrieved by the connection is zero bytes.</td>
</tr>
<tr>
<td align="left">-1015 <code>kCFURLErrorCannotDecodeRawData</code> <code>NSURLErrorCannotDecodeRawData</code></td>
<td align="left">The connection cannot decode data encoded with a known content encoding.</td>
</tr>
<tr>
<td align="left">-1016 <code>kCFURLErrorCannotDecodeContentData</code> <code>NSURLErrorCannotDecodeContentData</code></td>
<td align="left">The connection cannot decode data encoded with an unknown content encoding.</td>
</tr>
<tr>
<td align="left">-1017 <code>kCFURLErrorCannotParseResponse</code> <code>NSURLErrorCannotParseResponse</code></td>
<td align="left">The connection cannot parse the server’s response.</td>
</tr>
<tr>
<td align="left">-1018 <code>kCFURLErrorInternationalRoamingOff</code></td>
<td align="left">The connection failed because international roaming is disabled on the device.</td>
</tr>
<tr>
<td align="left">-1019 <code>kCFURLErrorCallIsActive</code></td>
<td align="left">The connection failed because a call is active.</td>
</tr>
<tr>
<td align="left">-1020 <code>kCFURLErrorDataNotAllowed</code></td>
<td align="left">The connection failed because data use is currently not allowed on the device.</td>
</tr>
<tr>
<td align="left">-1021 <code>kCFURLErrorRequestBodyStreamExhausted</code></td>
<td align="left">The connection failed because its request’s body stream was exhausted.</td>
</tr>
</tbody></table>
<h2 id="File-Errors"><a href="#File-Errors" class="headerlink" title="File Errors"></a>File Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-1100 <code>kCFURLErrorFileDoesNotExist</code> <code>NSURLErrorFileDoesNotExist</code></td>
<td align="left">The file operation failed because the file does not exist.</td>
</tr>
<tr>
<td align="left">-1101 <code>kCFURLErrorFileIsDirectory</code> <code>NSURLErrorFileIsDirectory</code></td>
<td align="left">The file operation failed because the file is a directory.</td>
</tr>
<tr>
<td align="left">-1102 <code>kCFURLErrorNoPermissionsToReadFile</code> <code>NSURLErrorNoPermissionsToReadFile</code></td>
<td align="left">The file operation failed because it does not have permission to read the file.</td>
</tr>
<tr>
<td align="left">-1103 <code>kCFURLErrorDataLengthExceedsMaximum</code> <code>NSURLErrorDataLengthExceedsMaximum</code></td>
<td align="left">The file operation failed because the file is too large.</td>
</tr>
</tbody></table>
<h2 id="SSL-Errors"><a href="#SSL-Errors" class="headerlink" title="SSL Errors"></a>SSL Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-1200 <code>kCFURLErrorSecureConnectionFailed</code> <code>NSURLErrorSecureConnectionFailed</code></td>
<td align="left">The secure connection failed for an unknown reason.</td>
</tr>
<tr>
<td align="left">-1201 <code>kCFURLErrorServerCertificateHasBadDate</code> <code>NSURLErrorServerCertificateHasBadDate</code></td>
<td align="left">The secure connection failed because the server’s certificate has an invalid date.</td>
</tr>
<tr>
<td align="left">-1202 <code>kCFURLErrorServerCertificateUntrusted</code> <code>NSURLErrorServerCertificateUntrusted</code></td>
<td align="left">The secure connection failed because the server’s certificate is not trusted.</td>
</tr>
<tr>
<td align="left">-1203 <code>kCFURLErrorServerCertificateHasUnknownRoot</code> <code>NSURLErrorServerCertificateHasUnknownRoot</code></td>
<td align="left">The secure connection failed because the server’s certificate has an unknown root.</td>
</tr>
<tr>
<td align="left">-1204 <code>kCFURLErrorServerCertificateNotYetValid</code> <code>NSURLErrorServerCertificateNotYetValid</code></td>
<td align="left">The secure connection failed because the server’s certificate is not yet valid.</td>
</tr>
<tr>
<td align="left">-1205 <code>kCFURLErrorClientCertificateRejected</code> <code>NSURLErrorClientCertificateRejected</code></td>
<td align="left">The secure connection failed because the client’s certificate was rejected.</td>
</tr>
<tr>
<td align="left">-1206 <code>kCFURLErrorClientCertificateRequired</code> <code>NSURLErrorClientCertificateRequired</code></td>
<td align="left">The secure connection failed because the server requires a client certificate.</td>
</tr>
</tbody></table>
<h2 id="Download-and-File-I-O-Errors"><a href="#Download-and-File-I-O-Errors" class="headerlink" title="Download and File I/O Errors"></a>Download and File I/O Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-2000 <code>kCFURLErrorCannotLoadFromNetwork</code> <code>NSURLErrorCannotLoadFromNetwork</code></td>
<td align="left">The connection failed because it is being required to return a cached resource, but one is not available.</td>
</tr>
<tr>
<td align="left">-3000 <code>kCFURLErrorCannotCreateFile</code> <code>NSURLErrorCannotCreateFile</code></td>
<td align="left">The file cannot be created.</td>
</tr>
<tr>
<td align="left">-3001 <code>kCFURLErrorCannotOpenFile</code> <code>NSURLErrorCannotOpenFile</code></td>
<td align="left">The file cannot be opened.</td>
</tr>
<tr>
<td align="left">-3002 <code>kCFURLErrorCannotCloseFile</code> <code>NSURLErrorCannotCloseFile</code></td>
<td align="left">The file cannot be closed.</td>
</tr>
<tr>
<td align="left">-3003 <code>kCFURLErrorCannotWriteToFile</code> <code>NSURLErrorCannotWriteToFile</code></td>
<td align="left">The file cannot be written.</td>
</tr>
<tr>
<td align="left">-3004 <code>kCFURLErrorCannotRemoveFile</code> <code>NSURLErrorCannotRemoveFile</code></td>
<td align="left">The file cannot be removed.</td>
</tr>
<tr>
<td align="left">-3005 <code>kCFURLErrorCannotMoveFile</code> <code>NSURLErrorCannotMoveFile</code></td>
<td align="left">The file cannot be moved.</td>
</tr>
<tr>
<td align="left">-3006 <code>kCFURLErrorDownloadDecodingFailedMidStream</code> <code>NSURLErrorDownloadDecodingFailedMidStream</code></td>
<td align="left">The download failed because decoding of the downloaded data failed mid-stream.</td>
</tr>
<tr>
<td align="left">-3007 <code>kCFURLErrorDownloadDecodingFailedToComplete</code> <code>NSURLErrorDownloadDecodingFailedToComplete</code></td>
<td align="left">The download failed because decoding of the downloaded data failed to complete.</td>
</tr>
</tbody></table>
<h2 id="Cookie-Errors"><a href="#Cookie-Errors" class="headerlink" title="Cookie Errors"></a>Cookie Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-4000 <code>kCFHTTPCookieCannotParseCookieFile</code></td>
<td align="left">The cookie file cannot be parsed.</td>
</tr>
</tbody></table>
<h2 id="CFNetServices-Errors"><a href="#CFNetServices-Errors" class="headerlink" title="CFNetServices Errors"></a>CFNetServices Errors</h2><table>
<thead>
<tr>
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-72000L <code>kCFNetServiceErrorUnknown</code></td>
<td align="left">An unknown error occurred.</td>
</tr>
<tr>
<td align="left">-72001L <code>kCFNetServiceErrorCollision</code></td>
<td align="left">An attempt was made to use a name that is already in use.</td>
</tr>
<tr>
<td align="left">-72002L <code>kCFNetServiceErrorNotFound</code></td>
<td align="left">Not used.</td>
</tr>
<tr>
<td align="left">-72003L <code>kCFNetServiceErrorInProgress</code></td>
<td align="left">A new search could not be started because a search is already in progress.</td>
</tr>
<tr>
<td align="left">-72004L <code>kCFNetServiceErrorBadArgument</code></td>
<td align="left">A required argument was not provided or was not valid.</td>
</tr>
<tr>
<td align="left">-72005L <code>kCFNetServiceErrorCancel</code></td>
<td align="left">The search or service was cancelled.</td>
</tr>
<tr>
<td align="left">-72006L <code>kCFNetServiceErrorInvalid</code></td>
<td align="left">Invalid data was passed to a CFNetServices function.</td>
</tr>
<tr>
<td align="left">-72007L <code>kCFNetServiceErrorTimeout</code></td>
<td align="left">A search failed because it timed out.</td>
</tr>
<tr>
<td align="left">-73000L <code>kCFNetServiceErrorDNSServiceFailure</code></td>
<td align="left">An error from DNS discovery; look at kCFDNSServiceFailureKey to get the error number and interpret using dnssd.h</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/27/iOSCodeTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/27/iOSCodeTips/" class="post-title-link" itemprop="url">iOSCodeTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-27 17:58:07" itemprop="dateCreated datePublished" datetime="2021-04-27T17:58:07+00:00">2021-04-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-21 09:02:57" itemprop="dateModified" datetime="2021-07-21T09:02:57+00:00">2021-07-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="iOS-Code-Tips-acknowledge"><a href="#iOS-Code-Tips-acknowledge" class="headerlink" title="iOS Code Tips ( acknowledge )"></a>iOS Code Tips ( acknowledge )</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://nshipster.cn/">https://nshipster.cn</a></p>
</blockquote>
<h2 id="编译器优化"><a href="#编译器优化" class="headerlink" title="编译器优化"></a>编译器优化</h2><h3 id="attribute"><a href="#attribute" class="headerlink" title="__attribute__"></a><code>__attribute__</code></h3><p>方法签名后，通过<code>__attribute__((&lt;#标志#&gt;))</code>来进行注释。</p>
<h4 id="pure-和-const"><a href="#pure-和-const" class="headerlink" title="pure 和 const"></a>pure 和 const</h4><p>e.g. 1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; pure 代表该函数除了使用了传入参数和&#x2F;或全局变量外没有其他副作用。</span><br><span class="line">- (NSString *)todayDisplayedText __attribute__((pure));</span><br></pre></td></tr></table></figure>

<p>e.g. 2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; const 表明该函数出了传入参数外不依赖于任何东西，这个函数的结果可以被缓存起来。后面调用时若参数相同，可以直接返回缓存的结果。</span><br><span class="line">&#x2F;&#x2F; 在这个示例中，一个数的平方值计算总是固定的，不依赖于其他变量或指针。</span><br><span class="line">int square(int n) __attribute__((const));</span><br></pre></td></tr></table></figure>

<h4 id="unused"><a href="#unused" class="headerlink" title="unused"></a>unused</h4><blockquote>
<p>当对一个函数增加了这个声明时，意味着这个函数可能不被使用，GCC不会对这个函数产生警告。</p>
</blockquote>
<p>使用 <code>__unused</code> 关键字可以达到同样的效果，可以在方法实现中声明没有被使用的参数。通过了解这个上下文，编译器可以进行相应的优化。你更可能会在 delegate 的方法实现里使用 <code>__unused</code>，因为 protocols 为了支持更多可能的用例经常会提供必要的参数之外的上下文。</p>
<h4 id="availability"><a href="#availability" class="headerlink" title="availability"></a>availability</h4><p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void f(void) __attribute__((availability(macosx, introduced&#x3D;10.4, deprecated&#x3D;10.6, obsolited&#x3D;10.7)));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>availability 属性是一个用逗号分隔的列表，第一项是平台名称，然后是可选的生命周期当中重要的里程碑时间，最后是额外信息。</p>
</blockquote>
<ul>
<li>availability 声明被引入的第一个版本</li>
<li>deprecated 声明被废弃的第一个版本，意味着用户应当从这个 API 迁移到另外的方法</li>
<li>obsoleted 声明被废弃的第一个版本，意味着被彻底删除不能使用了</li>
<li>unavailable 声明在这个平台上从来就是不可用的</li>
<li>message 额外的文本信息，Clang 在对于废弃和淘汰声明给出警告或者错误的时候会提供这些信息，可以用于指导用户进行 API 替换</li>
</ul>
<blockquote>
<p>在同一个声明上可以添加多个可用性属性，它们可能是针对不同平台的。只有当前和目标平台对应的平台可用性属性会发挥作用，其他的属性会被忽略掉。如果没有和当前目标苹果对应的可用性属性，整个可用性属性会被忽略。</p>
</blockquote>
<h5 id="支持的平台"><a href="#支持的平台" class="headerlink" title="支持的平台"></a>支持的平台</h5><ul>
<li><code>ios</code>: 苹果 iOS 操作系统。最低的部署目标通过 <code>-mios-version-min=*version*</code>或者 <code>-miphoneos-version-min=*version*</code> 命令行参数指定。</li>
<li><code>macosx</code>: 苹果 OS X 操作系统。最低的部署目标通过 <code>-mmacosx-version-min=*version*</code> 命令行参数指定。</li>
</ul>
<h4 id="overloadable"><a href="#overloadable" class="headerlink" title="overloadable"></a>overloadable</h4><blockquote>
<p>Clang 在 C 语言中提供了 C++ 函数重载支持，通过 <code>overloadable</code> 这个属性实现。例如我们要提供多个不同重载版本的 <code>tgsin</code> 函数，它会调用合适的标准库函数，分别提供对 <code>float</code>，<code>double</code> 和 <code>long double</code> 精度的值计算 <code>sine</code>值。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;math.h&gt;</span><br><span class="line">float __attribute__((overloadable)) tgsin(float x) &#123; return sinf(x); &#125;</span><br><span class="line">double __attribute__((overloadable)) tgsin(double x) &#123;return sin(x); &#125;</span><br><span class="line">long double __attribute__((overloadable)) tgsin(long double x) &#123; return sinl(x); &#125;</span><br></pre></td></tr></table></figure>

<p>注意:  <code>overloadable</code>只能用于函数。你可以通过使用 <code>id</code> 和 <code>void *</code> 这种泛型的返回值和参数类型，在一定程度上实现方法声明的重载。</p>
<h2 id="pragma-代码整理"><a href="#pragma-代码整理" class="headerlink" title="#pragma 代码整理"></a>#pragma 代码整理</h2><h3 id="pragma-mark-lt-标签文本-gt"><a href="#pragma-mark-lt-标签文本-gt" class="headerlink" title="#pragma mark - &lt;#标签文本#&gt;"></a>#pragma mark - &lt;#标签文本#&gt;</h3><p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - &lt;#title#&gt;</span><br></pre></td></tr></table></figure>



<h3 id="pragma-GCC-warning-“-lt-警告文本-gt-”"><a href="#pragma-GCC-warning-“-lt-警告文本-gt-”" class="headerlink" title="#pragma GCC warning “&lt;#警告文本#&gt;”"></a>#pragma GCC warning “&lt;#警告文本#&gt;”</h3><p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#pragma GCC warning &quot;TODO: implemente here&quot;</span><br></pre></td></tr></table></figure>



<h3 id="pragma-clang-diagnostic-push-ignored-“”-pop"><a href="#pragma-clang-diagnostic-push-ignored-“”-pop" class="headerlink" title="#pragma clang diagnostic push / ignored “” / pop"></a>#pragma clang diagnostic push / ignored “” / pop</h3><p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#pragma clang diagnostic push</span><br><span class="line">#pragma clang diagnostic ignored &quot;-Warc-retain-cycles&quot;</span><br><span class="line">&#x2F;&#x2F; 需要被忽略参数循环饮用警告的代码</span><br><span class="line">&#x2F;*</span><br><span class="line">self.completionBlock &#x3D; ^&#123;</span><br><span class="line">	&#x2F;&#x2F; ...</span><br><span class="line">&#125;</span><br><span class="line">*&#x2F;</span><br><span class="line">#pragma clang diagnostic pop</span><br></pre></td></tr></table></figure>



<h2 id="BOOL-bool-Boolean-NSCFBoolean"><a href="#BOOL-bool-Boolean-NSCFBoolean" class="headerlink" title="BOOL / bool / Boolean / NSCFBoolean"></a>BOOL / bool / Boolean / NSCFBoolean</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://nshipster.cn/bool/">https://nshipster.cn/bool/</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Name</th>
<th>Typedef</tt></th>
<th>Header</th>
<th>True Value</th>
<th>False Value</th>
</tr>
</thead>
<tbody><tr>
<td>Bool</td>
<td>signed char</td>
<td>objc.h</td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td>bool</td>
<td>_Bool(int)</td>
<td>stdbool.h</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>Boolean</td>
<td>unsigned char</td>
<td>MacTypes.h</td>
<td>TRUE</td>
<td>FALSE</td>
</tr>
<tr>
<td>NSNumber</td>
<td>__NSCFBoolean</td>
<td>Foundation.h</td>
<td>@(YES)</td>
<td>@(NO)</td>
</tr>
<tr>
<td>CFBooleanRef</td>
<td>struct</td>
<td>CoreFoundation.h</td>
<td>kCFBooleanTrue</td>
<td>kCFBooleanFalse</td>
</tr>
</tbody></table>
<h2 id="指针-amp-和"><a href="#指针-amp-和" class="headerlink" title="指针 &amp; 和 *"></a>指针 &amp; 和 *</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSString * a;</span><br></pre></td></tr></table></figure>

<p>a: 指向NSString实例对象a的指针（在使用时，对a的操作被解读为调用实例对象的get/set和其他实例方法调用）</p>
<p>*a: 实力对象a指向的数据</p>
<p>&amp;a: 指针本身（指针数据）</p>
<h2 id="XIB-布局问题"><a href="#XIB-布局问题" class="headerlink" title="XIB 布局问题"></a>XIB 布局问题</h2><p>通过xib 加载的文档在viewDidLoad中加载的时候并不会去布局frame ，只是拿到xib 中设置的大小属性，只有在 viewDidLayoutSubViews 里才会去根据布局去确定控件的最终尺寸(不过添加view 的操作不能放在这里，因为这个方法会调用多次)</p>
<h2 id="NSOrderedSet"><a href="#NSOrderedSet" class="headerlink" title="NSOrderedSet"></a><code>NSOrderedSet</code></h2><h3 id="继承关系"><a href="#继承关系" class="headerlink" title="继承关系"></a>继承关系</h3><blockquote>
<p><code>NSOrderedSet</code> 不是 <code>NSSet</code> 的子类。</p>
</blockquote>
<p><code>NSObject</code> &lt;- <code>NSSet</code> &lt;- <code>NSMutableSet</code></p>
<p><code>NSObject</code> &lt;- <code>NSOrderdSet</code> &lt;- <code>NSMutableOrderedSet</code></p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>因为 <code>NSMutableOrderedSet</code> 既不是 <code>NSSet</code> 也不是 <code>NSMutableSet</code>，因此需要尽可能避免对 <code>NSOrderedSet</code> 的使用。这个类的主要使用场景在 CoreData。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/ARM%E5%8F%8A%E6%B1%87%E7%BC%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/ARM%E5%8F%8A%E6%B1%87%E7%BC%96/" class="post-title-link" itemprop="url">ARM及汇编</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-06 14:21:55" itemprop="dateCreated datePublished" datetime="2021-04-06T14:21:55+00:00">2021-04-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-21 09:02:57" itemprop="dateModified" datetime="2021-07-21T09:02:57+00:00">2021-07-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ARM-及-汇编"><a href="#ARM-及-汇编" class="headerlink" title="ARM 及 汇编"></a>ARM 及 汇编</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/82490125">https://zhuanlan.zhihu.com/p/82490125</a></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gpa06f17azj30n10g9myn.jpg"></p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><h3 id="数据传送指令"><a href="#数据传送指令" class="headerlink" title="数据传送指令"></a>数据传送指令</h3><h4 id="LDR-STR"><a href="#LDR-STR" class="headerlink" title="LDR/STR"></a>LDR/STR</h4><ol>
<li><p>x86 架构：</p>
<p>寄存器之间 / 寄存器和内存见可以使用 MOV 指令 ；</p>
<p>允许直接操作内存单元上的数据。</p>
</li>
<li><p>ARM架构：</p>
<p>寄存器之间传送数据使用 MOV / 寄存器和内存之间使用 LDR ( load ) 和 STR ( store )；</p>
<p><img src="https://pic1.zhimg.com/80/v2-effe338f1536cce9bf286280cf021de4_1440w.jpg" alt="img"></p>
<p>内存单元上的数据不允许被直接操作，必须先放到寄存器中。</p>
</li>
</ol>
<h4 id="LTM-STM"><a href="#LTM-STM" class="headerlink" title="LTM / STM"></a>LTM / STM</h4><p>一次加载 / 存储多个寄存器</p>
<h4 id="LTP-STP-armv8-x64"><a href="#LTP-STP-armv8-x64" class="headerlink" title="LTP / STP ( armv8 x64 )"></a>LTP / STP ( armv8 x64 )</h4><p>一次加载 / 存储<strong>最多两个</strong>寄存器</p>
<p>避免产生分散的突发传输( LTM / STM )，高效利用双 pipeline 特性。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/62ea9cfecf80">https://www.jianshu.com/p/62ea9cfecf80</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/iosCodeSnippetsAndSkills/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/iosCodeSnippetsAndSkills/" class="post-title-link" itemprop="url">iosDevSnippetsAndSkills</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-06 11:14:33" itemprop="dateCreated datePublished" datetime="2021-04-06T11:14:33+00:00">2021-04-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-21 09:02:57" itemprop="dateModified" datetime="2021-07-21T09:02:57+00:00">2021-07-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="iOS-零散知识点和示例代码块"><a href="#iOS-零散知识点和示例代码块" class="headerlink" title="iOS 零散知识点和示例代码块"></a>iOS 零散知识点和示例代码块</h1><blockquote>
<p>部分内容来源：</p>
</blockquote>
<h2 id="RunLoop"><a href="#RunLoop" class="headerlink" title="RunLoop"></a>RunLoop</h2><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxcx5zeedj30u00fmq4q.jpg"></p>
<h2 id="内存-amp-Debug"><a href="#内存-amp-Debug" class="headerlink" title="内存 &amp; Debug"></a>内存 &amp; Debug</h2><h3 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h3><p>fp 寄存器存储了上一帧的地址，类似一个链表的起始地址，通过 fp 不断回溯可以将整个 Backtrace 函数调用栈进行串联。</p>
<h2 id="有没有办法将参数的NSDictionary附加到NSURLRequest而不是手动创建字符串？"><a href="#有没有办法将参数的NSDictionary附加到NSURLRequest而不是手动创建字符串？" class="headerlink" title="有没有办法将参数的NSDictionary附加到NSURLRequest而不是手动创建字符串？"></a>有没有办法将参数的<strong>NSDictionary</strong>附加到<strong>NSURLRequest</strong>而不是手动创建字符串？</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/106457">https://cloud.tencent.com/developer/ask/106457</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NSURLComponents *url &#x3D; [[NSURLComponents alloc] initWithURL:request.URL resolvingAgainstBaseURL:YES];</span><br><span class="line">NSMutableArray *queryItems &#x3D; NSMutableArray.new;</span><br><span class="line">[params enumerateKeysAndObjectsUsingBlock:^(NSString *name, NSString *value, BOOL *stop) &#123;</span><br><span class="line">   [queryItems addObject:[NSURLQueryItem queryItemWithName:name </span><br><span class="line">                          value:[value stringByAddingPercentEncodingWithAllowedCharacters:NSCharacterSet.URLQueryAllowedCharacterSet]</span><br><span class="line">                         ]</span><br><span class="line">   ];</span><br><span class="line">&#125;];</span><br><span class="line">url.queryItems &#x3D; queryItems;</span><br><span class="line">request.URL &#x3D; url.URL;</span><br></pre></td></tr></table></figure>



<h2 id="获取屏幕尺寸的两种方法"><a href="#获取屏幕尺寸的两种方法" class="headerlink" title="获取屏幕尺寸的两种方法"></a>获取屏幕尺寸的两种方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGSize screenSize &#x3D; UIApplication.sharedApplication.delegate.window.bounds.size;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGSize screenSize &#x3D; UIScreen.mainScreen.bounds.size;</span><br></pre></td></tr></table></figure>



<h2 id="Date-Extensions-判断-获取时间戳-时间差"><a href="#Date-Extensions-判断-获取时间戳-时间差" class="headerlink" title="Date+Extensions: 判断/获取时间戳/时间差"></a>Date+Extensions: 判断/获取时间戳/时间差</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Date</span> </span>&#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  是否为今天</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">isToday</span>()</span> -&gt; <span class="type">Bool</span>&#123;</span><br><span class="line">      <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">      <span class="keyword">let</span> unit: <span class="type">Set</span>&lt;<span class="type">Calendar</span>.<span class="type">Component</span>&gt; <span class="operator">=</span> [.day,.month,.year]</span><br><span class="line">      <span class="keyword">let</span> nowComps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="type">Date</span>())</span><br><span class="line">      <span class="keyword">let</span> selfCmps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="keyword">self</span>)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> (selfCmps.year <span class="operator">==</span> nowComps.year) <span class="operator">&amp;&amp;</span></span><br><span class="line">      (selfCmps.month <span class="operator">==</span> nowComps.month) <span class="operator">&amp;&amp;</span></span><br><span class="line">      (selfCmps.day <span class="operator">==</span> nowComps.day)</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  是否为昨天</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">isYesterday</span>()</span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">      <span class="keyword">let</span> unit: <span class="type">Set</span>&lt;<span class="type">Calendar</span>.<span class="type">Component</span>&gt; <span class="operator">=</span> [.day,.month,.year]</span><br><span class="line">      <span class="keyword">let</span> nowComps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="type">Date</span>())</span><br><span class="line">      <span class="keyword">let</span> selfCmps <span class="operator">=</span> calendar.dateComponents(unit, from: <span class="keyword">self</span>)</span><br><span class="line">      <span class="keyword">if</span> selfCmps.day <span class="operator">==</span> <span class="literal">nil</span> <span class="operator">||</span> nowComps.day <span class="operator">==</span> <span class="literal">nil</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> count <span class="operator">=</span> nowComps.day<span class="operator">!</span> <span class="operator">-</span> selfCmps.day<span class="operator">!</span></span><br><span class="line">      <span class="keyword">return</span> (selfCmps.year <span class="operator">==</span> nowComps.year) <span class="operator">&amp;&amp;</span></span><br><span class="line">         (selfCmps.month <span class="operator">==</span> nowComps.month) <span class="operator">&amp;&amp;</span></span><br><span class="line">         (count <span class="operator">==</span> <span class="number">1</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">///只有年月日的字符串</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">dataWithYMD</span>()</span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> fmt <span class="operator">=</span> <span class="type">DateFormatter</span>()</span><br><span class="line">      fmt.dateFormat <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span></span><br><span class="line">      <span class="keyword">let</span> selfStr <span class="operator">=</span> fmt.string(from: <span class="keyword">self</span>)</span><br><span class="line">      <span class="keyword">let</span> result <span class="operator">=</span> fmt.date(from: selfStr)<span class="operator">!</span></span><br><span class="line">      <span class="built_in">print</span>(result)</span><br><span class="line">      <span class="keyword">return</span> selfStr</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">///获取当前年月日的时间戳</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">timeIntervalWithYMDDate</span>()</span> -&gt; <span class="type">TimeInterval</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> fmt <span class="operator">=</span> <span class="type">DateFormatter</span>()</span><br><span class="line">      fmt.dateFormat <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span></span><br><span class="line">      <span class="keyword">let</span> selfStr <span class="operator">=</span> fmt.string(from: <span class="keyword">self</span>)</span><br><span class="line">      <span class="keyword">let</span> result <span class="operator">=</span> fmt.date(from: selfStr)<span class="operator">!</span></span><br><span class="line">      <span class="keyword">return</span> result.timeIntervalSinceReferenceDate <span class="operator">+</span> <span class="number">24</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">*</span> <span class="number">60</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  是否为今年</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">isThisYear</span>()</span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">       <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">       <span class="keyword">let</span> nowCmps <span class="operator">=</span> calendar.dateComponents([.year], from: <span class="type">Date</span>())</span><br><span class="line">       <span class="keyword">let</span> selfCmps <span class="operator">=</span> calendar.dateComponents([.year], from: <span class="keyword">self</span>)</span><br><span class="line">       <span class="keyword">let</span> result <span class="operator">=</span> nowCmps.year <span class="operator">==</span> selfCmps.year</span><br><span class="line">       <span class="keyword">return</span> result</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *  获得与当前时间的差距</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">deltaWithNow</span>()</span> -&gt; <span class="type">DateComponents</span>&#123;</span><br><span class="line">      <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.current</span><br><span class="line">      <span class="keyword">let</span> cmps <span class="operator">=</span> calendar.dateComponents([.hour,.minute,.second], from: <span class="keyword">self</span>, to: <span class="type">Date</span>())</span><br><span class="line">      <span class="keyword">return</span> cmps</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><p>特殊的符号”^”与”$”,分别表示一个字符串的开始与结束。</p>
<p>“^dog”:表示以”dog”开头的字符串（”dog product”,”dog123”,”dog” ）</p>
<p>类似于:- (BOOL)hasPrefix:(NSString *)aString;</p>
<p>“dog$”:表示以dog为结尾的字符串（”Product Manager is a dog”, “it is a dog”）</p>
<p>类似于:- (BOOL)hasSuffix:(NSString *)aString;</p>
<p>“^apple$”:表示以”apple”开头且以”apple”结尾的字符串</p>
<p>“banana”:表示任何包含”banana”的字符串</p>
<p>类似于 iOS8的新方法- (BOOL)containsString:(NSString *)aString,搜索子串用的。</p>
<p>“*”,”+”,”?”:分别表示”没有或更多([0, +∞)取整数)”,”一个或更多([1,+∞)取整数)”,”没有或一个([0,1]取整数)”</p>
<p>“ab*”:表示一个”a”后面按跟着0个或者N个”b”(“a”,”ab”,”abbbf”,这里并没有说是以b结尾)</p>
<p>“ab+”:表示一个”a”后面跟着至少一个”b”(“ab”,”abb”)</p>
<p>“ab?”:表示一个”a”后面跟着一个或者0个”b”(“a”,”abc”,”af”)</p>
<p>“a?b+$”:表示字符串末尾有0个或者1个”a”或1个”a”跟着1个或者多个”b”(“ab”,”b”,”bbb”,”abbbb”,……)</p>
<p>可以用大括号括起来（{}），表示一个重复的具体范围。例如</p>
<p>“ab{4}”:表示一个”a”跟着4个”b”,”abbbb”</p>
<p>‘’’ab{1,}’:表示一个”a”跟着至少1个”b”,(“ab”,”abb”,….)</p>
<p>“ab{3,4}”:表示一个”a”跟着3个或者4个”b”(“abbb”,”abbbb”)</p>
<p>所以”*”等于{0,},”+”等于{1,},”?”等于{0,1}。</p>
<p>注意：可以没有上线，但是不能没有下线{,5}为错误写法。</p>
<p>“|”表示“或”操作</p>
<p>“a|b”:表示一个字符串中含有”a”或者”b”</p>
<p>“(a|bcd)ef”:表示”aef”或者”bcdef”</p>
<p>“(a|b)*c”:表示”a”或者”b”后面跟着0或者多个”c”(“a”,”b”,”ac”,”accccc”,”bc”,”bcccc”)</p>
<p>方括号”[ ]“表示在括号内的众多字符中，选择1-N个括号内的符合语法的字符作为结果，例如</p>
<p>“[ab]”:表示一个字符串含有”a”或”b”，等价于”a|b”</p>
<p>“[a-d]”:表示一个字符串包含a-d中的一个，等价于”a|b|c|d”或者”[abcd]”</p>
<p>“^[a-zA-Z]”:表示以字母开头的字符串。</p>
<p>“[0-9]a”:表示”a”前面有一个数字。</p>
<p>“[a-zA-Z0-9]$”:表示一个字符串以字母或者数字结尾。</p>
<p>“.”:表示除了”\n”,”\r”之外的任意单个字符串。</p>
<p>“a.[a-z]”:表示一个”a”后面你跟着一个任意一个字符串和一个小写字母。</p>
<p>“^.{5}$”:表示任意一个长度是5的字符串。</p>
<p>“\num” 其中num是一个正整数。表示”\num”之前的字符出现相同的个数，例如</p>
<p>“(.)\1”:表示两个连续相同的字符。</p>
<p>“10{1,2}“:表示”1”后面跟着1个或者2个”0”(“10”,”100”)</p>
<p>“0{3,}“:表示至少有3个连续的”0”(“000”,”0000”)</p>
<p>在方括号里用’^’表示不希望出现的字符，’^’应在方括号里的第一位。</p>
<p>“@[^a-zA-Z]@”:表示两个”@”之间不应该有字母。</p>
<p>常用的正则：</p>
<p>“\d”:匹配一个数字字符，等价于”[0-9]”.</p>
<p>“\D”:匹配一个非数字字符，等价于”[^0-9]”</p>
<p>“\w”:匹配包括下划线的任何单词字符，等价于”[a-zA-Z0-9_]”</p>
<p>“\W”:匹配任何非单词字符，等价于”[^a-zA-Z0-9_]”</p>
<p>iOS中书写正则表达式，碰到转义字符，多加一个“\”,例如：</p>
<p>全数字字符：@”^\d+$”</p>
<h3 id="常用正则"><a href="#常用正则" class="headerlink" title="常用正则"></a>常用正则</h3><p>(1) 验证电话号码：（”^(\d{3,4}-)\d{7,8}$”） 　</p>
<p>(2) 验证Email地址：(“^\w+([-+.]\w+)*@\w+([-.]\w+)<em>.\w+([-.]\w+)</em>$”)； 　　</p>
<p>(3) 整数或者小数：^[0-9]+([.]{0,1}[0-9]+){0,1}$ 　　</p>
<p>(4) 只能输入数字：”^[0-9]*$”。 　　</p>
<p>(5) 只能输入由26个英文字母组成的字符串：”^[A-Za-z]+$”。 </p>
<p>(6) 验证是否含有^%&amp;’,;=?$\”等字符：”[^%&amp;’,;=?$\x22]+”。 　</p>
<p>(7) 只能输入汉字：”^[\u4e00-\u9fa5]{0,}$”。 　　</p>
<p>(8) 验证一年的12个月：”^(0?[1-9]|1[0-2])$”正确格式为：”01″～”09″和”10″～”12″。 　　</p>
<p>(9) 验证一个月的31天：”^((0?[1-9])|((1|2)[0-9])|30|31)$”正确格式为；”01″～”09″、”10″～”29″和“30”~“31”。 　　</p>
<p>(10) 获取日期正则表达式：\d{4}[年|-|.]\d{\1-\12}[月|-|.]\d{\1-\31}日? 注：可用来匹配大多数年月日信息。 　　</p>
<p>(11) 匹配空白行的正则表达式：\n\s*\r 注：可以用来删除空白行 </p>
<p>(12) 匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$ 注：表单验证时很实用 </p>
<p>(13) 匹配腾讯QQ号：[1-9][0-9]{4,14} 注：腾讯QQ号从10 000 开始 　　</p>
<p>(14) 匹配中国邮政编码：[1-9]\d{5}(?!\d) 注：中国邮政编码为6位数字 　　</p>
<p>(15) 匹配ip地址：((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)。</p>
<ol>
<li><p>验证用户名和密码：”^[a-zA-Z]\w{5,15}$” 　　</p>
</li>
<li><p>验证电话号码：（”^([\d{3,4}-)\d{7,8}$] 　　eg：021-68686868 0511-6868686； 　　</p>
</li>
<li><p>验证手机号码：”^1[3|4|5|7|8][0-9]\d{8}$”； 　　</p>
</li>
<li><p>验证身份证号（15位或18位数字）：”\d{14}[[0-9],0-9xX]”</p>
</li>
<li><p>验证Email地址：(“^\w+([-+.]\w+)*@\w+([-.]\w+)<em>.\w+([-.]\w+)</em>$”);</p>
</li>
<li><p>只能输入由数字和26个英文字母组成的字符串：(“^[A-Za-z0-9]+$”) ; </p>
</li>
<li><p>整数或者小数：^[0-9]+([.]{0,1}[0-9]+){0,1}$ 　　</p>
</li>
<li><p>只能输入数字：”^[0-9]*$”。 　　</p>
</li>
<li><p>只能输入n位的数字：”^\d{n}$”。 　　</p>
</li>
<li><p>只能输入至少n位的数字：”^\d{n,}$”。 　　</p>
</li>
<li><p>只能输入m~n位的数字：”^\d{m,n}$”。 　　</p>
</li>
<li><p>只能输入零和非零开头的数字：”^(0|[1-9][0-9]*)$”。 　　</p>
</li>
<li><p>只能输入有两位小数的正实数：”^[0-9]+(.[0-9]{2})?$”。 　</p>
</li>
<li><p>只能输入有1~3位小数的正实数：”^[0-9]+(.[0-9]{1,3})?$”。 </p>
</li>
<li><p>只能输入非零的正整数：”^+?[1-9][0-9]*$”。 　　</p>
</li>
<li><p>只能输入非零的负整数：”^-[1-9][]0-9″*$。 　　</p>
</li>
<li><p>只能输入长度为3的字符：”^.{3}$”。 　　</p>
</li>
<li><p>只能输入由26个英文字母组成的字符串：”^[A-Za-z]+$”。 　</p>
</li>
<li><p>只能输入由26个大写英文字母组成的字符串：”^[A-Z]+$”。 </p>
</li>
<li><p>只能输入由26个小写英文字母组成的字符串：”^[a-z]+$”。 </p>
</li>
<li><p>验证是否含有^%&amp;’,;=?$\”等字符：”[^%&amp;’,;=?$\x22]+”。 </p>
</li>
<li><p>只能输入汉字：”^[\u4e00-\u9fa5]{0,}$”。 　　</p>
</li>
<li><p>验证URL：”^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]*)?$”。 　　</p>
</li>
<li><p>验证一年的12个月：”^(0?[1-9]|1[0-2])$”正确格式为：”01″～”09″和”10″～”12″。 　　</p>
</li>
<li><p>验证一个月的31天：”^((0?[1-9])|((1|2)[0-9])|30|31)$”正确格式为；”01″～”09″、”10″～”29″和“30”~“31”。 　　</p>
</li>
<li><p>获取日期正则表达式：[\d{4]}[年|-|.]\d{\1-\12}[月|-|.]\d{\1-\31}日? 　　评注：可用来匹配大多数年月日信息。 　　</p>
</li>
<li><p>匹配双字节字符(包括汉字在内)：[^\x00-\xff] 　　评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1） 　　</p>
</li>
<li><p>匹配空白行的正则表达式：\n\s*\r 　　评注：可以用来删除空白行 　　</p>
</li>
<li><p>匹配HTML标记的正则表达式：&lt;(\S*?)[^&gt;]<em>&gt;.</em>?&lt;/&gt;|&lt;.*? /&gt; 　　评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力 　　</p>
</li>
<li><p>匹配首尾空白字符的正则表达式：^\s*|\s*$ 　　评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式 </p>
</li>
<li><p>匹配网址URL的正则表达式：[a-zA-z]+://[^\s]* 　　评注：网上流传的版本功能很有限，上面这个基本可以满足需求 　　</p>
</li>
<li><p>匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$ 　　评注：表单验证时很实用 　　</p>
</li>
<li><p>匹配腾讯QQ号：[1-9][0-9]{4,14} 　　评注：腾讯QQ号从10 000 开始 </p>
</li>
<li><p>匹配中国邮政编码：[1-9]\d{5}(?!\d) 　　评注：中国邮政编码为6位数字 　　</p>
</li>
<li><p>匹配ip地址：((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)。 　　下面给出正则表达式的元字符（来自百度百科）</p>
</li>
</ol>
<h3 id="简单应用"><a href="#简单应用" class="headerlink" title="简单应用"></a>简单应用</h3><ul>
<li>验证是不是QQ号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSString *pattern &#x3D; @&quot;[1-9][0-9]&#123;4,14&#125;&quot;;</span><br><span class="line">NSPredicate * pre &#x3D; [NSPredicate predicateWithFormat:@&quot;SELF MATCHES %@&quot;, pattern];</span><br><span class="line">BOOL isMatch &#x3D; [pre evaluateWithObject:self.enterText.text];</span><br></pre></td></tr></table></figure>



<h2 id="网络状态码"><a href="#网络状态码" class="headerlink" title="网络状态码"></a>网络状态码</h2><ul>
<li>1XX 提示信息：请求正在处理中</li>
<li>2XX 成功错误码：请求已被接受处理</li>
<li>3XX 重定向：完成请求需要附加操作</li>
<li>4XX 客户端错误：请求资源有误或者请求不合法，服务器无法处理</li>
<li>5XX 服务器错误：服务器处理请求出错</li>
</ul>
<h3 id="常见状态码"><a href="#常见状态码" class="headerlink" title="常见状态码"></a>常见状态码</h3><ul>
<li>200 OK</li>
<li>302 Found 暂时重定向</li>
<li>301 Move Permanently永久重定向</li>
<li>304 Not Modified 没有内容更新，使用缓存</li>
<li>400 Bad Request 客户端请求与语法错误</li>
<li>403 Forbidden 服务器拒绝提供服务</li>
<li>404 Not Found 请求资源不存在</li>
<li>500 Internal Server Error服务器发生了不可预期的错误</li>
<li>503 Server Unavailable 服务器当前不能处理客户端的请求，一段时间后可能恢复正常</li>
</ul>
<h2 id="HTTP-请求过程"><a href="#HTTP-请求过程" class="headerlink" title="HTTP 请求过程"></a>HTTP 请求过程</h2><p>一个完整的HTTP请求过程如下：</p>
<ol>
<li>用户在浏览器输入URL</li>
<li>域名解析（DNS的寻址）</li>
<li>TCP三次握手</li>
<li>握手成功后建立TCP通道，发起HTTP请求</li>
<li>服务器响应HTTP请求，返回对应的响应报文</li>
<li>客户端开始解析渲染</li>
</ol>
<h2 id="URL-和-URI"><a href="#URL-和-URI" class="headerlink" title="URL 和 URI"></a>URL 和 URI</h2><ul>
<li>URI：统一资源标识符</li>
<li>URL：统一资源定位符</li>
</ul>
<p>URI是一个用于标识互联网资源名称的字符串，最常见的形式是统一资源定位符（URL），经常指定为非正式的网址。更罕见的用法是统一资源名称（URN），其目的是通过提供一种途径。用于在特定的命名空间资源的标识，以补充网址。</p>
<p>即URL和URN 都是 URI的子集，URI是一种抽象的概念，URL是URI的一种常见的具象表达形式。</p>
<h2 id="缩放图片避免内存消耗过大"><a href="#缩放图片避免内存消耗过大" class="headerlink" title="缩放图片避免内存消耗过大"></a>缩放图片避免内存消耗过大</h2><p>原有缩放方法如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (UIImage *)scaleImage:(UIImage *)image newSize:(CGSize)newSize &#123;</span><br><span class="line">   UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);</span><br><span class="line">   [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];</span><br><span class="line">   UIImage *newImage &#x3D; UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">   UIGraphicsEndImgeContext();</span><br><span class="line">   </span><br><span class="line">   return newImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>处理大分辨率图片时，往往容易出现OOM，原因是-[UIImage drawInRect:]在绘制时，先解码图片，再生成原始分辨率大小的bitmap，这是很耗内存的。解决方法是使用更低层的ImageIO接口，避免中间bitmap产生。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+ (UIImage *)scaledImageWithData:(NSData *)data withSize:(CGSize)size scale:(CGFloat)scale orientation:(UIImageOrientation)orientation &#123;</span><br><span class="line">   CGFloat maxPixelSize &#x3D; MAX(size.width, size.height);</span><br><span class="line">   CGImageSourceRef sourceRef &#x3D; CGImageSourceCreateWithData((__bridge CFDataRef)data, nil);</span><br><span class="line">   NSDictionary *options &#x3D; @&#123;(__bridge id)kCGImageSourceThumnailFromImageAlways:(__bridge id)kCFBooleanTrue,</span><br><span class="line">   (__bridge id)kCGImageSourceThumbnailMaxPixelSize:[NSNumber numberWithFloat:maxPixelSize]&#125;;</span><br><span class="line">   </span><br><span class="line">   CGImageRef imageRef &#x3D; CGImageSourceCreateThumnailAtIndex(sourceRef, 0, (__bridge CFDictionaryRef)options);</span><br><span class="line">   UIImage *resultImage &#x3D; [UIImage imageWithCGImage:imageRef scale:scale orientation:orientation];</span><br><span class="line">   CGImageRelease(imageRef);</span><br><span class="line">   CFRelease(sourceRef);</span><br><span class="line">   </span><br><span class="line">   return resultImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="LocationManager-Combine-Version"><a href="#LocationManager-Combine-Version" class="headerlink" title="LocationManager - Combine Version"></a>LocationManager - Combine Version</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CoreLocation</span><br><span class="line"><span class="keyword">import</span> MapKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LocationManager</span>: <span class="title">NSObject</span>, <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> locationManager <span class="operator">=</span> <span class="type">CLLocationManager</span>()</span><br><span class="line">  <span class="meta">@Published</span> <span class="keyword">var</span> region: <span class="type">MKCoordinateRegion</span></span><br><span class="line">  <span class="meta">@Published</span> <span class="keyword">var</span> authorized <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">init</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> place <span class="operator">=</span> <span class="type">WondersOfTheWorld</span>().places.randomElement() <span class="operator">??</span> <span class="type">WondersOfTheWorld</span>().places[<span class="number">0</span>]</span><br><span class="line">    region <span class="operator">=</span> <span class="type">MKCoordinateRegion</span>(center: place.location.coordinate, latitudinalMeters: <span class="number">1000</span>, longitudinalMeters: <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    locationManager.delegate <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">    locationManager.desiredAccuracy <span class="operator">=</span> kCLLocationAccuracyBest</span><br><span class="line">    <span class="keyword">if</span> locationManager.authorizationStatus <span class="operator">==</span> .authorizedWhenInUse &#123;</span><br><span class="line">      authorized <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">      locationManager.startUpdatingLocation()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">requestAuthorization</span>()</span> &#123;</span><br><span class="line">    locationManager.requestWhenInUseAuthorization()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - CLLocationManagerDelegate</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LocationManager</span>: <span class="title">CLLocationManagerDelegate</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">locationManagerDidChangeAuthorization</span>(<span class="keyword">_</span> <span class="params">manager</span>: <span class="type">CLLocationManager</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> locationManager.authorizationStatus <span class="operator">==</span> .authorizedWhenInUse &#123;</span><br><span class="line">      authorized <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">      locationManager.startUpdatingLocation()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">locationManager</span>(<span class="keyword">_</span> <span class="params">manager</span>: <span class="type">CLLocationManager</span>, <span class="params">didUpdateLocations</span> <span class="params">locations</span>: [<span class="type">CLLocation</span>])</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> latest <span class="operator">=</span> locations.first <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    region <span class="operator">=</span> <span class="type">MKCoordinateRegion</span>.<span class="keyword">init</span>(center: latest.coordinate, latitudinalMeters: <span class="number">1000</span>, longitudinalMeters: <span class="number">1000</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Region: <span class="subst">\(region)</span>&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">locationManager</span>(<span class="keyword">_</span> <span class="params">manager</span>: <span class="type">CLLocationManager</span>, <span class="params">didFailWithError</span> <span class="params">error</span>: <span class="type">Error</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> clError <span class="operator">=</span> error <span class="keyword">as?</span> <span class="type">CLError</span> <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> clError &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">CLError</span>.denied:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Access denied&quot;</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;LocationManager didFailWithError: <span class="subst">\(clError.localizedDescription)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><blockquote>
<p> 使用preconditionFailure（_：file：line :)或fatalError（_：file：line :)而不是assertionFailure（_：file：line :)可以使您的应用在release配置下崩溃。</p>
</blockquote>
<p>Ref: <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/91213ee3cecf">https://www.jianshu.com/p/91213ee3cecf</a></p>
<h2 id="字符串国际化中，格式化字符串多参数位置调整"><a href="#字符串国际化中，格式化字符串多参数位置调整" class="headerlink" title="字符串国际化中，格式化字符串多参数位置调整"></a>字符串国际化中，格式化字符串多参数位置调整</h2><p>e.g.</p>
<p>/* Message in alert dialog when something fails */</p>
<p>“%@ Error! %@ failed!” = “%2$@ blah blah, %1$@ blah!”;</p>
<p>上例中，两个参数在翻译后的字符串中，前后位置调换。</p>
<h2 id="使用-xib-时的-AutolLayout-和-frame-设置"><a href="#使用-xib-时的-AutolLayout-和-frame-设置" class="headerlink" title="使用 xib 时的 AutolLayout 和 frame 设置"></a>使用 xib 时的 AutolLayout 和 frame 设置</h2><p>开起AutoLayout后</p>
<p>方法调用顺序：viewDidLoad -&gt; viewWillLayoutSubviews（这个函数在执行时加载文件对应的xib中设置的约束）-&gt; viewDidLayoutSubviews</p>
<p>因此在viewDidLoad和viewWillLayoutSubviews中设置frame都是无效的，frame会在加载layout约束时重新计算。</p>
<p>想要更改frame有两个方法：</p>
<ol>
<li>在viewDidLayoutSubviews中设置frame；</li>
<li>将约束control-drag到代码中，通过IBOutlet设置对应属性。通过这个方式可以在viewDidLoad和viewWillLayoutSubviews中进行设置。</li>
</ol>
<blockquote>
<p> Tip：如果要对frame进行修改并产生动画，需要在动画block内的代码块最后调用[被修改frame的view.super layoutIfNeeded];</p>
</blockquote>
<h2 id="用-NSKeyedArchiver-和-NSKeyedUnarchiver-实现多层数据结构的完全复制"><a href="#用-NSKeyedArchiver-和-NSKeyedUnarchiver-实现多层数据结构的完全复制" class="headerlink" title="用 NSKeyedArchiver 和 NSKeyedUnarchiver 实现多层数据结构的完全复制"></a>用 NSKeyedArchiver 和 NSKeyedUnarchiver 实现多层数据结构的完全复制</h2><h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *str1 &#x3D; @“1”;</span><br><span class="line">NSMutableString *str2 &#x3D; @“2”;</span><br><span class="line"></span><br><span class="line">NSMutabelArray *arr1 &#x3D; [NSMutableArray arrayWithObjects:str1, str2, nil];</span><br><span class="line">NSMutableArray *arr2 &#x3D; [NSMutableArray arrayWithObjects:str1, str2, arr1, nil];</span><br><span class="line"></span><br><span class="line">NSMutableArray *arr3 &#x3D; [[NSMutableArray alloc] initWithArray:arr2 copyItems:YES];</span><br><span class="line"></span><br><span class="line">NSMutableString *str3 &#x3D; [arr1 objectAtIndex:0];</span><br><span class="line">[str3 appendString:@“1”];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;arrM2--%@&quot;,arrM2);</span><br><span class="line">NSLog(@&quot;arrM3--%@&quot;,arrM3);</span><br></pre></td></tr></table></figure>

<h3 id="结果："><a href="#结果：" class="headerlink" title="结果："></a>结果：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">2017-03-14 00:55:57.604 深复制和完全复制[6080:438490] arrM2--(</span><br><span class="line">    11,</span><br><span class="line">    2,</span><br><span class="line">        (</span><br><span class="line">        11,</span><br><span class="line">        2</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">2017-03-14 00:55:57.606 深复制和完全复制[6080:438490] arrM3--(</span><br><span class="line">    1,</span><br><span class="line">    2,</span><br><span class="line">        (</span><br><span class="line">        11,</span><br><span class="line">        2</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>外层数据深拷贝，内层数据依然是浅拷贝（只拷贝指针）。</p>
<h3 id="修复："><a href="#修复：" class="headerlink" title="修复："></a>修复：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray *arr3 &#x3D; [NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:arr2]];</span><br></pre></td></tr></table></figure>



<h2 id="ARC-MRC-引用计数模式设置"><a href="#ARC-MRC-引用计数模式设置" class="headerlink" title="ARC - MRC 引用计数模式设置"></a>ARC - MRC 引用计数模式设置</h2><p>Project设置 -&gt; Build Settings -&gt; Apple LLVM x.x - Language - Objective C -&gt; Weak References in Manual Retain Release: </p>
<p>NO: MRC</p>
<p>YES: ARC</p>
<h2 id="tintColorDidChange"><a href="#tintColorDidChange" class="headerlink" title="tintColorDidChange"></a>tintColorDidChange</h2><p>当弹出一个alert或者action sheet时，iOS7会自动将后面视图的tint color变暗。此时，我们可以在自定义视图中重写tintColorDidChange方法来执行我们想要的操作。</p>
<h2 id="UIView-不能接受事件处理的情况"><a href="#UIView-不能接受事件处理的情况" class="headerlink" title="UIView 不能接受事件处理的情况"></a>UIView 不能接受事件处理的情况</h2><ol>
<li>alpha &lt; 0.01</li>
<li>userInteractionEnable = NO</li>
<li>hidden = YES</li>
</ol>
<h2 id="如何重写自己的-hash-方法"><a href="#如何重写自己的-hash-方法" class="headerlink" title="如何重写自己的 hash 方法"></a>如何重写自己的 hash 方法</h2><p>hash方法是NSObject中声明的，默认实现是返回对象的内存地址。</p>
<p>那么hash方法的最佳实践到底是什么呢?<br> 大神<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://nshipster.com/authors/mattt-thompson/">Mattt Thompson</a>在<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://nshipster.com/equality/">Equality</a>中给出的结论就是</p>
<p>In reality, a simple XOR over the hash values of critical properties is sufficient 99% of the time(对关键属性的hash值进行位异或运算作为hash值)</p>
<p>比如对于Person类的hash方法实现如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (NSUInteger)hash &#123;</span><br><span class="line">  </span><br><span class="line">   return [self.name hash] ^ [self.birthday hash];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="xib-动画"><a href="#xib-动画" class="headerlink" title="xib 动画"></a>xib 动画</h2><p>Xib中的控件，通过约束更改尺寸/位置等属性后，需要调用控件的父视图的layoutIfNeed方法。</p>
<p>如果是使用UIView的animateWith…动画方法，需要在动画block内部的最后调用该方法。</p>
<h2 id="ios-开发-loaded-the-“ViewController”-nib-but-the-view-outlet-was-not-set-’"><a href="#ios-开发-loaded-the-“ViewController”-nib-but-the-view-outlet-was-not-set-’" class="headerlink" title="ios 开发 loaded the “ViewController” nib but the view outlet was not set.’"></a>ios 开发 loaded the “ViewController” nib but the view outlet was not set.’</h2><p>遇到loaded the “ViewController” nib but the view outlet was not set.’时，解决办法为：<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_8f38d3410101a1rb.html%EF%BC%8C%E9%9C%80%E8%A6%81%E5%B0%86Files&#39;s">http://blog.sina.com.cn/s/blog_8f38d3410101a1rb.html，需要将Files&#39;s</a> Owner中的view变量做一下关联。</p>
<p>但是，有时候做关联时并没有看到view变量，这时，需要设置一下Files’s Owner的class，之后就可以做关联了。详情参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10750082/loaded-the-controller-nib-but-the-view-outlet-was-not-set">https://stackoverflow.com/questions/10750082/loaded-the-controller-nib-but-the-view-outlet-was-not-set</a></p>
<h2 id="How-to-avoid-clipboard-warning-as-possibly-as-you-can"><a href="#How-to-avoid-clipboard-warning-as-possibly-as-you-can" class="headerlink" title="How to avoid clipboard warning as possibly as you can"></a>How to avoid clipboard warning as possibly as you can</h2><p>Always check <strong>UIPasteboard.hasStrings</strong> before reading <strong>UIPasteboard.string</strong>, you can <strong>potentially</strong> save one clipboard warning.</p>
<p>——from ying Chong</p>
<h2 id="怎么使用-GeometryReader-传入的-GeometryProxy-类型的参数，又不会因为在视图层级中加入-GeometryReader-导致占用了全部的可用屏幕空间，导致布局出现错误。"><a href="#怎么使用-GeometryReader-传入的-GeometryProxy-类型的参数，又不会因为在视图层级中加入-GeometryReader-导致占用了全部的可用屏幕空间，导致布局出现错误。" class="headerlink" title="怎么使用 GeometryReader 传入的 GeometryProxy 类型的参数，又不会因为在视图层级中加入 GeometryReader 导致占用了全部的可用屏幕空间，导致布局出现错误。"></a>怎么使用 GeometryReader 传入的 GeometryProxy 类型的参数，又不会因为在视图层级中加入 GeometryReader 导致占用了全部的可用屏幕空间，导致布局出现错误。</h2><p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxgunt0cmj30ay07taa2.jpg"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Graph</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">  <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> width <span class="operator">=</span> <span class="type">UIScreen</span>.main.bounds.width <span class="comment">// just initial constant</span></span><br><span class="line">  <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">      <span class="type">HStack</span>(spacing: <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">Color</span>.red.frame(width: width <span class="operator">/</span> <span class="number">3</span>, height: <span class="number">80</span>)</span><br><span class="line">        <span class="type">Color</span>.blue.frame(width: width <span class="operator">/</span> <span class="number">3</span>, height: <span class="number">120</span>)</span><br><span class="line">        <span class="type">Color</span>.green.frame(width: width <span class="operator">/</span> <span class="number">3</span>, height: <span class="number">180</span>)</span><br><span class="line">      &#125;.background(<span class="type">GeometryReader</span> &#123; gp -&gt; <span class="type">Color</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> frame <span class="operator">=</span> gp.frame(in: .local)</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            <span class="keyword">self</span>.width <span class="operator">=</span> frame.size.width <span class="comment">// &lt;&lt; dynamic, on layout !!</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Color</span>.clear</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="收到键盘通知后自动调整-scrollview-的-contentOffset"><a href="#收到键盘通知后自动调整-scrollview-的-contentOffset" class="headerlink" title="收到键盘通知后自动调整 scrollview 的 contentOffset"></a>收到键盘通知后自动调整 scrollview 的 contentOffset</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">- (void)keyboardWillShow:(NSNotification *)notification</span><br><span class="line">&#123;</span><br><span class="line">    NSDictionary *info &#x3D; [notification userInfo];</span><br><span class="line">    CGFloat kbH &#x3D; [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size.height;</span><br><span class="line">    NSIndexPath *indexPath &#x3D; [NSIndexPath indexPathForRow:self.classes.count inSection:0];</span><br><span class="line">    CGRect p &#x3D; [self.baseTableView rectForRowAtIndexPath:indexPath];</span><br><span class="line">    CGRect rectInSelfview &#x3D; [self.baseTableView convertRect:p toView:self.view];</span><br><span class="line">    CGFloat cellBottomY &#x3D; rectInSelfview.origin.y + rectInSelfview.size.height;</span><br><span class="line">    </span><br><span class="line">    if (cellBottomY &lt; kbH) &#123;</span><br><span class="line">        </span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [UIView animateWithDuration:0.2 animations:^&#123;</span><br><span class="line">        </span><br><span class="line">        self.baseTableView.contentOffset &#x3D; CGPointMake(0, cellBottomY - (self.baseTableView.height - kbH));</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="避免锁死Tip"><a href="#避免锁死Tip" class="headerlink" title="避免锁死Tip"></a>避免锁死Tip</h2><ol>
<li><p>dispatch_once 中不要有同步到主线程执行的方法。</p>
</li>
<li><p>CTTelephonyNetworkInfo 最好在 +load方法或者 main 方法之前的其他时机提前初始化一个共享的实例，避免踩到子线程懒加载时候要求主线程同步响应的坑。</p>
</li>
<li><p>有可能存在锁竞争的代码尽量不在主线程同步执行。</p>
</li>
<li><p>如果主线程与子线程不可避免的存在竞争时，加锁的粒度要尽量小，操作要尽量轻。、</p>
</li>
<li><p>数据库读写，文件压缩/解压缩等磁盘 IO 行为不放在主线程执行。</p>
</li>
<li><p>如果存在主线程将任务同步到串行队列中执行的场景，确保这些任务不与子线程可能存在的耗时操作复用同一个串行队列。</p>
</li>
<li><p>对于一些启动阶段非必要同步加载并且有比较密集磁盘 IO 行为的 SDK，如各种支付分享等第三方 SDK 都可以延迟，错开加载。</p>
</li>
<li><p>NSUserDefaults 底层实现中存在直接或者间接的跨进程通信，在主线程同步调用容易发生卡死。➡️重度使用参考MMKV，轻度使用参考firebase自己写歌轻量的UserDefaults类</p>
</li>
<li><p>[[UIApplication sharedApplication] openURL]接口，内部实现也存在同步的跨进程通信。➡️iOS10 及以上的系统版本使用[[UIApplication sharedApplication] openURL:options:completionHandler:]这个接口替换，此接口可以异步调起，不会造成卡死。</p>
</li>
</ol>
<h2 id="测量一段代码的运行时间"><a href="#测量一段代码的运行时间" class="headerlink" title="测量一段代码的运行时间"></a>测量一段代码的运行时间</h2><h3 id="使用-包装了-mach-absolute-time-的-CACurrentMediaTime-方法来以秒为单位测量时间"><a href="#使用-包装了-mach-absolute-time-的-CACurrentMediaTime-方法来以秒为单位测量时间" class="headerlink" title="使用 包装了 mach_absolute_time 的 CACurrentMediaTime() 方法来以秒为单位测量时间"></a>使用 包装了 <code>mach_absolute_time</code> 的 <code>CACurrentMediaTime()</code> 方法来以秒为单位测量时间</h3><blockquote>
<p>和 <code>NSDate</code> 或 <code>CFAbsoluteTimeGetCurrent()</code> 偏移量不同的是，<code>mach_absolute_time()</code> 和 <code>CACurrentMediaTime()</code> 是基于内建时钟的，能够更精确更原子化地测量，并且不会因为外部时间变化而变化（例如时区变化、夏时制、秒突变等）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">static size_t const count &#x3D; 1000;</span><br><span class="line">static size_t const iterations &#x3D; 10000;</span><br><span class="line">CFTimeInterval startTime &#x3D; CACurrentMediaTime();</span><br><span class="line">&#123;</span><br><span class="line">    for (size_t i &#x3D; 0; i &lt; iterations; i++) &#123;</span><br><span class="line">        @autoreleasepool &#123;</span><br><span class="line">            NSMutableArray *mutableArray &#x3D; [NSMutableArray array];</span><br><span class="line">            for (size_t j &#x3D; 0; j &lt; count; j++) &#123;</span><br><span class="line">                [mutableArray addObject:object];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">CFTimeInterval endTime &#x3D; CACurrentMediaTime();</span><br><span class="line">NSLog(@&quot;Total Runtime: %g s&quot;, endTime - startTime);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这个例子中 <code>startTime</code> 和 <code>endTime</code> 之间的 block 代码是不必要的，只是为了提高可读性，让代码看起来更清晰明了：很容易能分隔开变量会发生大规模突变的代码</p>
</blockquote>
<h3 id="dispatch-benchmark"><a href="#dispatch-benchmark" class="headerlink" title="dispatch_benchmark"></a>dispatch_benchmark</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">uint64_t t &#x3D; dispatch_benchmark(iterations, ^&#123;</span><br><span class="line">    @autoreleasepool &#123;</span><br><span class="line">        NSMutableArray *mutableArray &#x3D; [NSMutableArray array];</span><br><span class="line">        for (size_t i &#x3D; 0; i &lt; count; i++) &#123;</span><br><span class="line">            [mutableArray addObject:object];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">NSLog(@&quot;[[NSMutableArray array] addObject:] Avg. Runtime: %llu ns&quot;, t);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>不要在提交的最终代码里包含<code>dispatch_benchmark</code>函数，这只应该用在测试或开发过程中。另外，使用instruments获取真正影响代码和程序效率的部分远比关注代码绝对运行时间更重要。</p>
</blockquote>
<h3 id="公共方法"><a href="#公共方法" class="headerlink" title="公共方法"></a>公共方法</h3><blockquote>
<p>出于仅提供辅助而与具体状态无关，如果特别有用的话，可能值得使其全局可用</p>
</blockquote>
<p>e.g.</p>
<p>TransactionStateMachine.h</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSUinteger, TransactionState) &#123;</span><br><span class="line">  TransactionOpened,</span><br><span class="line">  TransactionPending,</span><br><span class="line">  TransactionClosed</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">extern NSString * NSStringFromTransactionState(TransactionState state);</span><br></pre></td></tr></table></figure>



<p>TransactionStateMachine.m</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">NSString * NSStringFromTransactionState(TransactionState state) &#123;</span><br><span class="line">  switch (state) &#123;</span><br><span class="line">    case TransactionOpened:</span><br><span class="line">      return @&quot;Opened&quot;;</span><br><span class="line">    case TransactionPending:</span><br><span class="line">      return @&quot;Pending&quot;;</span><br><span class="line">    case TransactionClosed:</span><br><span class="line">      return @&quot;Closed&quot;;</span><br><span class="line">    default:</span><br><span class="line">      return nil</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="使用-CFStringTransform-正则化用户生产的内容"><a href="#使用-CFStringTransform-正则化用户生产的内容" class="headerlink" title="使用 CFStringTransform 正则化用户生产的内容"></a>使用 CFStringTransform 正则化用户生产的内容</h2><p>字符串变换的一个更实际的应用是正则化不可预知的用户输入。即使你的应用并不单独处理其他语言，你也应当能智能地处理用户向你的应用输入的任何内容。</p>
<p>例如，你想在设备上建立一个可搜索的电影索引，它包含世界各地的人的问候：</p>
<ul>
<li>首先，应用 <code>kCFStringTransformToLatin</code> 变换将所有非英文文本转换为拉丁字母表示。</li>
</ul>
<blockquote>
<p>Hello! こんにちは! สวัสดี! مرحبا! 您好! → Hello! kon’nichiha! s̄wạs̄dī! mrḥbạ! nín hǎo!</p>
</blockquote>
<ul>
<li>然后，应用 <code>kCFStringTransformStripCombiningMarks</code> 变换来去除变音符和重音。</li>
</ul>
<blockquote>
<p>Hello! kon’nichiha! s̄wạs̄dī! mrḥbạ! nín hǎo! → Hello! kon’nichiha! swasdi! mrhba! nin hao!</p>
</blockquote>
<ul>
<li>最后，用 <code>CFStringLowercase</code> 转为小写，并用<a target="_blank" rel="noopener" href="https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFStringTokenizerRef/Reference/reference.html"><code>CFStringTokenizer</code></a> 分词用作文本的索引。</li>
</ul>
<blockquote>
<p>(hello, kon’nichiha, swasdi, mrhba, nin, hao)</p>
</blockquote>
<p>通过对用户输入的文本使用同样的变换，你就可以实现一个通用的搜索，无论搜索文本或内容是什么语言！</p>
<h2 id="CoreMotion-和-CoreLocation组合使用时一些移动速度范围指导值"><a href="#CoreMotion-和-CoreLocation组合使用时一些移动速度范围指导值" class="headerlink" title="CoreMotion 和 CoreLocation组合使用时一些移动速度范围指导值"></a>CoreMotion 和 CoreLocation组合使用时一些移动速度范围指导值</h2><ul>
<li>步行速度通常最高能达到 2.5 米每秒（5.6 mph, 9 km/h）</li>
<li>跑步速度范围从 2.5 到 7.5 米每秒（5.6 – 16.8 mph, 9 – 27 km/h）</li>
<li>骑行速度范围从 3 到 12 米每秒（6.7 – 26.8 mph, 10.8 – 43.2 km/h）</li>
<li>汽车的速度可以超过 100 米每秒（220 mph, 360 km/h）</li>
</ul>
<h3 id="或者，你可能会使用位置数据来改变-UI，取决于现在的位置是否在一片水域。"><a href="#或者，你可能会使用位置数据来改变-UI，取决于现在的位置是否在一片水域。" class="headerlink" title="或者，你可能会使用位置数据来改变 UI，取决于现在的位置是否在一片水域。"></a>或者，你可能会使用位置数据来改变 UI，取决于现在的位置是否在一片水域。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if currentLocation.intersects(waterRegion) &#123;</span><br><span class="line">    if activity.walking &#123;</span><br><span class="line">        print(&quot;🏊‍&quot;)</span><br><span class="line">    &#125; else if activity.automotive &#123;</span><br><span class="line">        print(&quot;🚢&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="使用-keyPath-时避免拼写错误"><a href="#使用-keyPath-时避免拼写错误" class="headerlink" title="使用 keyPath 时避免拼写错误"></a>使用 keyPath 时避免拼写错误</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (void)observeValueForKeyPath:(NSString *)keyPath</span><br><span class="line">                      ofObject:(id)object</span><br><span class="line">                        change:(NSDictionary *)change</span><br><span class="line">                       context:(void *)context</span><br><span class="line">&#123;</span><br><span class="line">    if ([object isKindOfClass:[NSOperation class]]) &#123;</span><br><span class="line">        if ([keyPath isEqualToString:NSStringFromSelector(@selector(isFinished))]) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; else if (...) &#123;</span><br><span class="line">        &#x2F;&#x2F; ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="removeObserver时，避免因尚未注册导致的崩溃"><a href="#removeObserver时，避免因尚未注册导致的崩溃" class="headerlink" title="removeObserver时，避免因尚未注册导致的崩溃"></a>removeObserver时，避免因尚未注册导致的崩溃</h3><blockquote>
<p>使用 @try / @catch 块包裹 remove 语句</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (void)observeValueForKeyPath:(NSString *)keyPath</span><br><span class="line">                      ofObject:(id)object</span><br><span class="line">                        change:(NSDictionary *)change</span><br><span class="line">                       context:(void *)context</span><br><span class="line">&#123;</span><br><span class="line">    if ([keyPath isEqualToString:NSStringFromSelector(@selector(isFinished))]) &#123;</span><br><span class="line">        if ([object isFinished]) &#123;</span><br><span class="line">          @try &#123;</span><br><span class="line">              [object removeObserver:self forKeyPath:NSStringFromSelector(@selector(isFinished))];</span><br><span class="line">          &#125;</span><br><span class="line">          @catch (NSException * __unused exception) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>当然，这个例子中没有处理一个捕获的异常，这其实是一种妥协的方式。因此，只有当面对连续不断的崩溃并且不能通过一般的措施（竞争条件或者来自父类的非法行为）补救才会用这种方式。</p>
</blockquote>
<h2 id="断言和断言处理器"><a href="#断言和断言处理器" class="headerlink" title="断言和断言处理器"></a>断言和断言处理器</h2><h3 id="两套断言宏"><a href="#两套断言宏" class="headerlink" title="两套断言宏"></a>两套断言宏</h3><ol>
<li>一般断言：<code>NSAssert</code> / <code>NSCAssert</code></li>
<li>参数化断言：<code>NSParameterAssert</code> / <code>NSCParameterAssert</code></li>
</ol>
<h4 id="使用方法："><a href="#使用方法：" class="headerlink" title="使用方法："></a>使用方法：</h4><blockquote>
<p>方法或函数应当在代码最开始处使用 <code>NSParameterAssert</code> / <code>NSCParameterAssert</code> 来强制输入的值满足先验条件，这是一条金科玉律；其他情况下使用 <code>NSAssert</code> / <code>NSCAssert</code>。</p>
</blockquote>
<h4 id="区别："><a href="#区别：" class="headerlink" title="区别："></a>区别：</h4><blockquote>
<p> C 和 Objective-C 的断言：<code>NSAssert</code> 应当只用于 Objective-C 环境中（即方法实现中），而 <code>NSCAssert</code> 应当只用于 C 环境中（即函数中）。</p>
</blockquote>
<h4 id="Also"><a href="#Also" class="headerlink" title="Also:"></a>Also:</h4><blockquote>
<p><code>NSAssert</code>和<code>NSCAssert</code>有多参数变体，从<code>NSAssert1</code>到<code>NSAssert5</code>，他们各自使用不同数量的参数用于<code>printf</code>风格的格式化字符串。</p>
</blockquote>
<h3 id="NSAssertionHandler"><a href="#NSAssertionHandler" class="headerlink" title="NSAssertionHandler"></a><code>NSAssertionHandler</code></h3><blockquote>
<p><code>NSAssertionHandler</code> 提供了一套优雅地处理断言失败的方式来保留珍贵的现实世界的使用信息……但是不要在生产环境中使用<code>NSAssertionHandler</code>……基础类库中的断言处理只可远观不可亵玩。</p>
</blockquote>
<blockquote>
<p><code>NSAssertionHandler</code> 是一个很直接的类，带有两个需要在子类中实现的方法：<code>-handleFailureInMethod:...</code> （当 <code>NSAssert</code> / <code>NSParameterAssert</code> 失败时调用）和 <code>-handleFailureInFunction:...</code> （当 <code>NSCAssert</code> / <code>NSCParameterAssert</code> 失败时调用）。</p>
</blockquote>
<p>e.g.</p>
<p>LoggingAssertionHander.h</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@interface LoggingAssertionHandler: NSAssertionHandler</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<p>LoggingAssertionHandler.m</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@implementation LoggingAssertionHandler</span><br><span class="line"></span><br><span class="line">- (void)handleFailureInMethod:(SEL)selector</span><br><span class="line">                       object:(id)object</span><br><span class="line">                         file:(NSString *)fileName</span><br><span class="line">                   lineNumber:(NSInteger)line</span><br><span class="line">                  description:(NSString *)format, ...</span><br><span class="line">&#123;</span><br><span class="line">  NSLog(@&quot;NSAssert Failure: Method %@ for object %@ in %@#%i&quot;, NSStringFromSelector(selector), object, fileName, line);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)handleFailureInFunction:(NSString *)functionName</span><br><span class="line">                           file:(NSString *)fileName</span><br><span class="line">                     lineNumber:(NSInteger)line</span><br><span class="line">                    description:(NSString *)format, ...</span><br><span class="line">&#123;</span><br><span class="line">  NSLog(@&quot;NSCAssert Failure: Function (%@) in %@#%i&quot;, functionName, fileName, line);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<blockquote>
<p>每个线程都可以指定断言处理器。想设置一个 <code>NSAssertionHandler</code> 的子类来处理失败的断言，在线程的 <code>threadDictionary</code> 对象中设置 <code>NSAssertionHandlerKey</code> 字段即可。</p>
<p>大部分情况下，你只需在 <code>-application:didFinishLaunchingWithOptions:</code> 中设置当前线程的断言处理器。</p>
</blockquote>
<p>e.g.</p>
<p>AppDelegate.m</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application</span><br><span class="line">didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">  NSAssertionHandler *assertionHandler &#x3D; [[LoggingAssertionHandler alloc] init];</span><br><span class="line">  [[[NSThread currentThread] threadDictionary] setValue:assertionHandler</span><br><span class="line">                                                 forKey:NSAssertionHandlerKey];</span><br><span class="line">  &#x2F;&#x2F; ...</span><br><span class="line"></span><br><span class="line">  return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="数据持久化"><a href="#数据持久化" class="headerlink" title="数据持久化"></a>数据持久化</h2><h3 id="NSKeyedArchiver和NSKeyedUnarchiver"><a href="#NSKeyedArchiver和NSKeyedUnarchiver" class="headerlink" title="NSKeyedArchiver和NSKeyedUnarchiver"></a><code>NSKeyedArchiver</code>和<code>NSKeyedUnarchiver</code></h3><p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1. 获取存储路径</span><br><span class="line">NSURL *path &#x3D; [NSBundle.mainBundle resourceURL];</span><br><span class="line">path &#x3D; [path URLByAppendingPathComponent:@&quot;Documents&quot;];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2. 存储</span><br><span class="line">NSDate *timestamp &#x3D; [NSDate date];</span><br><span class="line">NSData *storeData &#x3D; [NSKeyedArchiver archivedDataWithRootObject:timestamp requiringSecureCoding:NO error:nil];</span><br><span class="line">[storeData writeToURL:path options:NSDataWritingFileProtectionCompleteUnlessOpen error:nil];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3. 取出数据</span><br><span class="line">NSDate *date &#x3D; [NSKeyedUnarchiver unarchivedObjectOfClass:NSDate.class fromData:[NSData dataWithContentsOfURL:path] error:nil];</span><br></pre></td></tr></table></figure>



<h2 id="文件写入与读取"><a href="#文件写入与读取" class="headerlink" title="文件写入与读取"></a>文件写入与读取</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://nshipster.cn/nsfilemanager/">https://nshipster.cn/nsfilemanager/</a></p>
</blockquote>
<p>进行文件的写入与读取时，不要使用 <code>NSBundle -xxxURL</code> 或 <code>NSBundle -xxxPath</code> 方法获取存储路径，可以使用 <code>NSSearchPathForDirectoriesInDomains</code> 。</p>
<p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSString *documentsPath &#x3D; [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];</span><br><span class="line">documentsPath &#x3D; [documentsPath stringByAppendingPathComponent:@&quot;store.data&quot;];</span><br></pre></td></tr></table></figure>

<h3 id="推荐：NSFileManager"><a href="#推荐：NSFileManager" class="headerlink" title="推荐：NSFileManager"></a>推荐：<code>NSFileManager</code></h3><h2 id="使用-NSIndexSet-或-NSMutableIndexSet-配置设置项"><a href="#使用-NSIndexSet-或-NSMutableIndexSet-配置设置项" class="headerlink" title="使用 NSIndexSet 或 NSMutableIndexSet 配置设置项"></a>使用 <code>NSIndexSet</code> 或 <code>NSMutableIndexSet</code> 配置设置项</h2><p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">static NSUInteger const PreferenceItemICloudSyncOn &#x3D; 1001;</span><br><span class="line">static NSUInteger const PreferenceItemPreferredLocalCacheDataOn &#x3D; 1002;</span><br><span class="line">static NSUInteger const PreferenceItemNotificationsOn &#x3D; 1010;</span><br><span class="line">static NSUInteger const PreferenceItemNotificationsShowAlertOn &#x3D; 1011;</span><br><span class="line"></span><br><span class="line">static NSUInteger const PreferenceItemCardStyleOn &#x3D; 2001;</span><br><span class="line">static NSUInteger const PreferenceItemShowStrokeBorderOn &#x3D; 2002;</span><br><span class="line">static NSUInteger const PreferenceItemHideTableViewSeparatorOn &#x3D; 2003;</span><br><span class="line"></span><br><span class="line">static NSUInteger const PreferenceItemGuestModeOn &#x3D; 3001;</span><br><span class="line">static NSUInteger const PreferenceItemHideSpecificFilesOn &#x3D; 3002;</span><br><span class="line"></span><br><span class="line">- (NSMutableIndexSet *)openedPreferenceItems &#123;</span><br><span class="line">    </span><br><span class="line">    if (!_openedPreferenceItems) &#123;</span><br><span class="line">        </span><br><span class="line">      &#x2F;&#x2F; 添加某项</span><br><span class="line">        _openedPreferenceItems &#x3D; [NSMutableIndexSet indexSet];</span><br><span class="line">        [_openedPreferenceItems addIndex:PreferenceItemICloudSyncOn];</span><br><span class="line">        [_openedPreferenceItems addIndex:PreferenceItemNotificationsOn];</span><br><span class="line">        [_openedPreferenceItems addIndex:PreferenceItemHideTableViewSeparatorOn];</span><br><span class="line">        [_openedPreferenceItems addIndex:PreferenceItemHideSpecificFilesOn];</span><br><span class="line">    &#125;</span><br><span class="line">    return _openedPreferenceItems;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 移除某项</span><br><span class="line">[self.openedPreferenceItems removeIndex:PreferenceItemGuestModeOn];</span><br></pre></td></tr></table></figure>



<h2 id="确定文件是否存在"><a href="#确定文件是否存在" class="headerlink" title="确定文件是否存在"></a>确定文件是否存在</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSFileManager *fileManager &#x3D; [NSFileManager defaultManager];</span><br><span class="line">NSString *documentsPath &#x3D; [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];</span><br><span class="line">NSString *filePath &#x3D; [documentsPath stringByAppendingPathComponent:@&quot;file.txt&quot;];</span><br><span class="line">BOOL fileExists &#x3D; [fileManager fileExistsAtPath:filePath];</span><br></pre></td></tr></table></figure>



<h2 id="NSPredicate"><a href="#NSPredicate" class="headerlink" title="NSPredicate"></a><code>NSPredicate</code></h2><h3 id="替换符"><a href="#替换符" class="headerlink" title="替换符"></a>替换符</h3><ul>
<li><p><code>%@</code>: 对值为字符串、数字或日期对象的替换值</p>
</li>
<li><p><code>%K</code>: 是key path的替换值。</p>
<p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSPredicate *ageIs33Predicate &#x3D; [NSPredicate predicateWithFormat:@&quot;%K &#x3D; %@&quot;, @&quot;age&quot;, @33];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; [&quot;Charlie Smith&quot;]</span><br><span class="line">NSLog(@&quot;Age 33: %@&quot;, [people filteredArrayUsingPredicate:ageIs33Predicate]);</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p><code>$VARIABLE_NAME</code>是可以被<code>NSPredicate -predicateWithSubstitutionVariables:</code>替换的值。</p>
<p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSPredicate *namesBeginningWithLetterPredicate &#x3D; [NSPredicate predicateWithFormat:@&quot;(firstName BEGINSWITH[cd] $letter) OR (lastName BEGINSWITH[cd] $letter)&quot;];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; [&quot;Alice Smith&quot;, &quot;Quentin Alberts&quot;]</span><br><span class="line">NSLog(@&quot;&#39;A&#39; Names: %@&quot;, [people filteredArrayUsingPredicate:[namesBeginningWithLetterPredicate predicateWithSubstitutionVariables:@&#123;@&quot;letter&quot;: @&quot;A&quot;&#125;]]);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="NSUndoManager"><a href="#NSUndoManager" class="headerlink" title="NSUndoManager"></a><code>NSUndoManager</code></h2><p>e.g.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">@interface ViewController()&lt;UITextFieldDelegate&gt;</span><br><span class="line">@property (nonatomic, strong) UITextField *textField;</span><br><span class="line">@property (nonatomic, strong) UILabel *label;</span><br><span class="line">@end</span><br><span class="line">  </span><br><span class="line">@implementation ViewController</span><br><span class="line">  </span><br><span class="line">&#x2F;&#x2F;&#x2F; UI</span><br><span class="line">- (void)testMethod17 &#123;</span><br><span class="line">    </span><br><span class="line">    self.textField &#x3D; [[UITextField alloc] initWithFrame:CGRectMake(8, 84 + 20, UIScreen.mainScreen.bounds.size.width - 16, 36)];</span><br><span class="line">    self.textField.backgroundColor &#x3D; UIColor.systemFillColor;</span><br><span class="line">    self.textField.layer.cornerRadius &#x3D; 4.0;</span><br><span class="line">    UIView *left &#x3D; [[UIView alloc] initWithFrame:CGRectMake(0, 0, 12, 0)];</span><br><span class="line">    UIView *right &#x3D; [[UIView alloc] initWithFrame:CGRectMake(0, 0, 12, 0)];</span><br><span class="line">    self.textField.leftView &#x3D; left;</span><br><span class="line">    self.textField.rightView &#x3D; right;</span><br><span class="line">    self.textField.leftViewMode &#x3D; UITextFieldViewModeAlways;</span><br><span class="line">    self.textField.rightViewMode &#x3D; UITextFieldViewModeAlways;</span><br><span class="line">    self.textField.delegate &#x3D; self;</span><br><span class="line">    [self.view addSubview:self.textField];</span><br><span class="line">    </span><br><span class="line">    self.label &#x3D; [[UILabel alloc] initWithFrame:CGRectMake(8, 84 + 20 + 36 + 20, UIScreen.mainScreen.bounds.size.width - 16, 48)];</span><br><span class="line">    self.label.textColor &#x3D; UIColor.secondaryLabelColor;</span><br><span class="line">    [self.view addSubview:self.label];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (BOOL)textFieldShouldReturn:(UITextField *)textField &#123;</span><br><span class="line">    </span><br><span class="line">    [self appendingLabelText:textField.text];</span><br><span class="line">    textField.text &#x3D; @&quot;&quot;;</span><br><span class="line">    [textField resignFirstResponder]; &#x2F;&#x2F; 回车后使 textField 放弃第一响应者，这样 viewController 可以变成第一响应者来响应手机摇动的动作，触发 undoManager 响应。</span><br><span class="line">    return NO;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)appendingLabelText:(NSString *)text &#123;</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; 每个 controller、控件都可以有单独的 undoManager，这里为了方便只用应用默认的全局 undoManager。</span><br><span class="line">    NSUndoManager *undoManager &#x3D; UIApplication.sharedApplication.delegate.window.undoManager;</span><br><span class="line">    &#x2F;&#x2F; 在 undoManager 注册对应 actionName 被 undo 时需要调用的方法 Selector 和参数。</span><br><span class="line">    [undoManager registerUndoWithTarget:self selector:@selector(removeLastText:) object:text];</span><br><span class="line">    &#x2F;&#x2F; 注册撤销操作的名称，可以使用国际化达到更好的文本效果。</span><br><span class="line">    [undoManager setActionName:@&quot;add text&quot;];</span><br><span class="line">    if (self.label.text.length) &#123;</span><br><span class="line">        </span><br><span class="line">        self.label.text &#x3D; [NSString stringWithFormat:@&quot;%@ %@&quot;, self.label.text, text];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        </span><br><span class="line">        self.label.text &#x3D; text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)removeLastText:(NSString *)text &#123;</span><br><span class="line">    </span><br><span class="line">    NSUndoManager *undoManager &#x3D; UIApplication.sharedApplication.delegate.window.undoManager;</span><br><span class="line">    [undoManager registerUndoWithTarget:self selector:@selector(appendingLabelText:) object:text];</span><br><span class="line">    [undoManager setActionName:@&quot;remove text&quot;];</span><br><span class="line">    if ([self.label.text containsString:text]) &#123;</span><br><span class="line">        </span><br><span class="line">        NSUInteger firstLetterLocation &#x3D; [self.label.text rangeOfString:text].location;</span><br><span class="line">        NSString *stringToRemove &#x3D; text;</span><br><span class="line">        if (firstLetterLocation &gt; 0) &#123;</span><br><span class="line">            </span><br><span class="line">            NSString *previous &#x3D; [NSString stringWithFormat:@&quot;%c&quot;, [self.label.text characterAtIndex:firstLetterLocation - 1]];</span><br><span class="line">            if ([previous isEqualToString:@&quot; &quot;]) &#123;</span><br><span class="line">                </span><br><span class="line">                stringToRemove &#x3D; [NSString stringWithFormat:@&quot; %@&quot;, text];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        self.label.text &#x3D; [self.label.text stringByReplacingOccurrencesOfString:stringToRemove withString:@&quot;&quot; options:kNilOptions range:NSMakeRange(0, self.label.text.length)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>



<p>-registerUndoWithTarget:selector:object: 这个简便方法只能接受 object 一个参数。除此之外，还有一种通过 NSInvocation 注册复杂的撤销操作的办法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 在 [undoManager prepareWithInvocationTarget:self] 之后，可以直接调用进行撤销操作时需要调用的方法，并传入相应参数。</span><br><span class="line">[[undoManager prepareWithInvocationTarget:self] removeLastText:text];</span><br><span class="line">[undoManager setActionName:@&quot;add text&quot;];</span><br></pre></td></tr></table></figure>



<h2 id="UIKeyCommand"><a href="#UIKeyCommand" class="headerlink" title="UIKeyCommand"></a><code>UIKeyCommand</code></h2><blockquote>
<p>为了使 iPad 更高效的工作，iOS 9 增加了 <em>可发现特性</em>，这是一个叠加层，用于显示一个应用程序内当前可用的键盘命令。</p>
</blockquote>
<h3 id="UIKeyCommand快捷键的组成"><a href="#UIKeyCommand快捷键的组成" class="headerlink" title="UIKeyCommand快捷键的组成"></a><code>UIKeyCommand</code>快捷键的组成</h3><ol>
<li><p>input</p>
<p>你需要识别的关键字，或正确的箭头和退出键，本身并不包含字符。可用常数有：</p>
<ol>
<li><code>UIKeyInputUpArrow</code></li>
<li><code>UIKeyInputDownArrow</code></li>
<li><code>UIKeyInputLeftArrow</code></li>
<li><code>UIKeyInputRightArrow</code></li>
<li><code>UIKeyInputEscape</code></li>
</ol>
</li>
<li><p>modifierFlags</p>
<p>一个或多个<code>UIKeyModifierFlags</code>，描述了需要与 input 键同时使用的键</p>
<ol>
<li><code>.Command</code>、<code>.Alternate</code>、<code>.Shift</code>、<code>.Control</code>：分别表示 Command，Option，Shift 和 Control 键</li>
<li><code>.NumericPad</code>：表示 input 应该来自数字键盘，而不是标准键盘最上面一行</li>
<li><code>.AlphaShift</code>：表示大小写锁定键是否作为按键组合的一部分（大写状态）</li>
</ol>
</li>
<li><p>action</p>
<p>按键命令调用的方法，<code>UIKeyCommand</code> 作为其唯一的参数。键盘事件将追溯响应链，直到发现一个匹配的方法。</p>
</li>
<li><p>discoverabilityTitle（仅 iOS 9）</p>
<p>一个可选的标签，用来在发现层显示快捷键命令。</p>
<p>==只有设置了标题的键盘命令才会被列出。==</p>
</li>
</ol>
<h3 id="设置并响应键盘命令"><a href="#设置并响应键盘命令" class="headerlink" title="设置并响应键盘命令"></a>设置并响应键盘命令</h3><blockquote>
<p>启用键盘命令很简单，只需要在响应链的某处提供一个 <code>UIKeyCommand</code> 实例的数组。</p>
</blockquote>
<p>文字输入是自动的第一响应者，但也许更方便的是在视图控制器通过实现 <code>canBecomeFirstResponder()</code>来响应键盘命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)canBecomeFirstResponder &#123;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后通过 <code>keyCommands</code> 属性提供可用的按键命令列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (NSArray&lt;UIKeyCommand *&gt;*)keyCommands &#123;</span><br><span class="line">    return @[</span><br><span class="line">        [UIKeyCommand keyCommandWithInput:@&quot;1&quot; modifierFlags:UIKeyModifierCommand action:@selector(selectTab:) discoverabilityTitle:@&quot;Types&quot;],</span><br><span class="line">        [UIKeyCommand keyCommandWithInput:@&quot;2&quot; modifierFlags:UIKeyModifierCommand action:@selector(selectTab:) discoverabilityTitle:@&quot;Protocols&quot;],</span><br><span class="line">        [UIKeyCommand keyCommandWithInput:@&quot;3&quot; modifierFlags:UIKeyModifierCommand action:@selector(selectTab:) discoverabilityTitle:@&quot;Functions&quot;],</span><br><span class="line">        [UIKeyCommand keyCommandWithInput:@&quot;4&quot; modifierFlags:UIKeyModifierCommand action:@selector(selectTab:) discoverabilityTitle:@&quot;Operators&quot;],</span><br><span class="line"></span><br><span class="line">        [UIKeyCommand keyCommandWithInput:@&quot;f&quot; </span><br><span class="line">                            modifierFlags:UIKeyModifierCommand | UIKeyModifierAlternate </span><br><span class="line">                                   action:@selector(search:) </span><br><span class="line">                     discoverabilityTitle:@&quot;Find…&quot;]</span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ...</span><br><span class="line"></span><br><span class="line">- (void)selectTab:(UIKeyCommand *)sender &#123;</span><br><span class="line">    NSString *selectedTab &#x3D; sender.input;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="情景敏感性"><a href="#情景敏感性" class="headerlink" title="情景敏感性"></a>情景敏感性</h3><blockquote>
<p>只要一个按键被按下， <code>keyCommands</code> 属性就会被访问，从而可以提供根据你应用程序的上下文状态敏感的反应。虽然这是类似菜单项的方式，其有效/无效状态被配置在 OS X 里面，iOS 版的建议是完全忽略不活动的命令，也就是说，在发现层不要显示变灰的命令。</p>
</blockquote>
<p>e.g. 对于不同的登录状态，有不同的可用快捷键。（针对已登录用户有额外的可用快捷键）</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> globalKeyCommands <span class="operator">=</span> [<span class="type">UIKeyCommand</span>(input:<span class="operator">...</span>), <span class="operator">...</span>]</span><br><span class="line"><span class="keyword">let</span> loggedInUserKeyCommands <span class="operator">=</span> [<span class="type">UIKeyCommand</span>(input:<span class="operator">...</span>), <span class="operator">...</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> keyCommands: [<span class="type">UIKeyCommand</span>]<span class="operator">?</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> isLoggedInUser() &#123;</span><br><span class="line">        <span class="keyword">return</span> globalKeyCommands <span class="operator">+</span> loggedInUserKeyCommands</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> globalKeyCommands</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="跳转系统设置页面"><a href="#跳转系统设置页面" class="headerlink" title="跳转系统设置页面"></a>跳转系统设置页面</h2><ol>
<li><p>配置 URL Types</p>
<p>添加 URL Schemes 为 <code>prefs</code> 的 URL Types</p>
<p>Role 为 <code>Editor</code></p>
</li>
<li><p>openURL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NSString * urlString &#x3D; @&quot;prefs:root&#x3D;WIFI&quot;;</span><br><span class="line">NSURL *url &#x3D; [NSURL URLWithString:urlString];</span><br><span class="line">UIApplication *app &#x3D; [UIApplication sharedApplication];</span><br><span class="line">if ([app canOpenURL:[NSURL URLWithString:urlString]]) &#123;</span><br><span class="line"> </span><br><span class="line">    if ([[UIDevice currentDevice].systemVersion doubleValue] &gt;&#x3D; 10.0) &#123;</span><br><span class="line">    </span><br><span class="line">    	[app openURL:url options:@&#123;&#125; completionHandler:nil];</span><br><span class="line">    &#125; </span><br><span class="line">    else &#123;</span><br><span class="line">    </span><br><span class="line">    	[app openURL:url];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="其他系统偏好设置的-URL"><a href="#其他系统偏好设置的-URL" class="headerlink" title="其他系统偏好设置的 URL"></a>其他系统偏好设置的 URL</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1.系统设置</span><br><span class="line">prefs:root&#x3D;INTERNET_TETHERING</span><br><span class="line">2.WIFI设置</span><br><span class="line">prefs:root&#x3D;WIFI</span><br><span class="line">3.蓝牙设置</span><br><span class="line">prefs:root&#x3D;Bluetooth</span><br><span class="line">4.系统通知</span><br><span class="line">prefs:root&#x3D;NOTIFICATIONS_ID</span><br><span class="line">5.通用设置</span><br><span class="line">prefs:root&#x3D;General</span><br><span class="line">6.显示设置</span><br><span class="line">prefs:root&#x3D;DISPLAY&amp;BRIGHTNESS</span><br><span class="line">7.壁纸设置</span><br><span class="line">prefs:root&#x3D;Wallpaper</span><br><span class="line">8.声音设置</span><br><span class="line">prefs:root&#x3D;Sounds</span><br><span class="line">9.隐私设置</span><br><span class="line">prefs:root&#x3D;privacy</span><br><span class="line">10.打开 APP Store</span><br><span class="line">prefs:root&#x3D;STORE</span><br><span class="line">11.打开 Notes</span><br><span class="line">prefs:root&#x3D;NOTES</span><br><span class="line">12.打开 Safari</span><br><span class="line">prefs:root&#x3D;Safari</span><br><span class="line">13.打开 Music</span><br><span class="line">prefs:root&#x3D;MUSIC</span><br><span class="line">14.打开 photo</span><br><span class="line">prefs:root&#x3D;Photos</span><br></pre></td></tr></table></figure>



<h2 id="密码规则-UITextInputPasswordRules"><a href="#密码规则-UITextInputPasswordRules" class="headerlink" title="密码规则 UITextInputPasswordRules"></a>密码规则 <code>UITextInputPasswordRules</code></h2><p>便利方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">PasswordRule</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">CharacterClass</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> upper, lower, digits, special, asciiPrintable, unicode</span><br><span class="line">        <span class="keyword">case</span> custom(<span class="type">Set</span>&lt;<span class="type">Character</span>&gt;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">required</span>(<span class="type">CharacterClass</span>)</span><br><span class="line">    <span class="keyword">case</span> allowed(<span class="type">CharacterClass</span>)</span><br><span class="line">    <span class="keyword">case</span> maxConsecutive(<span class="type">UInt</span>)</span><br><span class="line">    <span class="keyword">case</span> minLength(<span class="type">UInt</span>)</span><br><span class="line">    <span class="keyword">case</span> maxLength(<span class="type">UInt</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PasswordRule</span>: <span class="title">CustomStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .required(<span class="keyword">let</span> characterClass):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;required: <span class="subst">\(characterClass)</span>&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .allowed(<span class="keyword">let</span> characterClass):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;allowed: <span class="subst">\(characterClass)</span>&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .maxConsecutive(<span class="keyword">let</span> length):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;max-consecutive: <span class="subst">\(length)</span>&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .minLength(<span class="keyword">let</span> length):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;minlength: <span class="subst">\(length)</span>&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .maxLength(<span class="keyword">let</span> length):</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;maxlength: <span class="subst">\(length)</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PasswordRule</span>.<span class="title">CharacterClass</span>: <span class="title">CustomStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .upper: <span class="keyword">return</span> <span class="string">&quot;upper&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .lower: <span class="keyword">return</span> <span class="string">&quot;lower&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .digits: <span class="keyword">return</span> <span class="string">&quot;digits&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .special: <span class="keyword">return</span> <span class="string">&quot;special&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .asciiPrintable: <span class="keyword">return</span> <span class="string">&quot;ascii-printable&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .unicode: <span class="keyword">return</span> <span class="string">&quot;unicode&quot;</span></span><br><span class="line">        <span class="keyword">case</span> .custom(<span class="keyword">let</span> characters): <span class="keyword">return</span> <span class="string">&quot;[&quot;</span> <span class="operator">+</span> <span class="type">String</span>(characters) <span class="operator">+</span> <span class="string">&quot;]&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UITextInputPasswordRules</span> </span>&#123;</span><br><span class="line">    <span class="keyword">convenience</span> <span class="function"><span class="keyword">init</span>(<span class="params">rules</span>: [<span class="type">PasswordRule</span>])</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> descriptor <span class="operator">=</span> rules.map&#123; <span class="variable">$0</span>.description &#125;</span><br><span class="line">            .joined(separator: <span class="string">&quot;; &quot;</span>)</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(descriptor: descriptor)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="性能优化-让对象在后台销毁。"><a href="#性能优化-让对象在后台销毁。" class="headerlink" title="性能优化 - 让对象在后台销毁。"></a>性能优化 - 让对象在后台销毁。</h2><blockquote>
<p>当容器类持有大量对象时，销毁的资源消耗就会十分明显。可以把对象放到后台线程释放。</p>
<p>Tip: 把对象捕获到block中，在后台队列随便发个消息。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSArray *temp &#x3D; self.array;</span><br><span class="line">self.array &#x3D; nil;</span><br><span class="line">dispatch_async(queue, ^&#123;</span><br><span class="line">  [temp class];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="使用新-API-快速创建可滑动的半屏controller"><a href="#使用新-API-快速创建可滑动的半屏controller" class="headerlink" title="使用新 API 快速创建可滑动的半屏controller"></a>使用新 API 快速创建可滑动的半屏controller</h2><p>e.g.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> webViewController <span class="operator">=</span> <span class="type">WebViewController</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> sheet <span class="operator">=</span> webViewController.sheetPresentationController &#123;</span><br><span class="line">    </span><br><span class="line">    sheet.detents <span class="operator">=</span> [.medium(), .large()]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">present(webViewController, animated: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>



<ol>
<li><p><code>sheedPresentationController</code>的<code>detents</code>属性中，不同配置的顺序影响展示的效果，默认展示<code>detents</code>数组中的第一个配置</p>
<p>  i.e. 如果想默认先半屏，那么设置<code>[.medium(), .large()]</code></p>
<p>  ​      如果想默认先全屏，那么设置<code>[.large(), .medium()]</code></p>
</li>
</ol>
<h3 id="添加-sheet-顶部的抓取条"><a href="#添加-sheet-顶部的抓取条" class="headerlink" title="添加 sheet 顶部的抓取条"></a>添加 sheet 顶部的抓取条</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sheet.prefersGrabberVisible <span class="operator">=</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>



<h3 id="防止展示-sheet-时底层视图变暗"><a href="#防止展示-sheet-时底层视图变暗" class="headerlink" title="防止展示 sheet 时底层视图变暗"></a>防止展示 sheet 时底层视图变暗</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sheet.smallestUndimmedDetentIdentifier <span class="operator">=</span> .medium</span><br></pre></td></tr></table></figure>



<h3 id="防止半屏滚动-sheet-时，sheet-自动向上展开"><a href="#防止半屏滚动-sheet-时，sheet-自动向上展开" class="headerlink" title="防止半屏滚动 sheet 时，sheet 自动向上展开"></a>防止半屏滚动 sheet 时，sheet 自动向上展开</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sheet.prefersScrollingExpandsWhenScrolledToEdge <span class="operator">=</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>



<h3 id="定制-sheet-的圆角半径"><a href="#定制-sheet-的圆角半径" class="headerlink" title="定制 sheet 的圆角半径"></a>定制 sheet 的圆角半径</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sheet.preferredCornerRadius <span class="operator">=</span> <span class="number">30.0</span></span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/App-Store-%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96%E7%BD%91%E5%9D%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/App-Store-%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96%E7%BD%91%E5%9D%80/" class="post-title-link" itemprop="url">App Store 隐私政策网址</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:17:13 / 修改时间：03:18:07" itemprop="dateCreated datePublished" datetime="2021-04-06T03:17:13+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本软件尊重并保护所有使用服务用户的个人隐私权。为了给您提供更准确、更有个性化的服务，本软件会按照本隐私权政策的规定使用和披露您的个人信息。但本软件将以高度的勤勉、审慎义务对待这些信息。除本隐私权政策另有规定外，在未征得您事先许可的情况下，本软件不会将这些信息对外披露或向第三方提供。本软件会不时更新本隐私权政策。您在同意本软件服务使用协议之时，即视为您已经同意本隐私权政策全部内容。本隐私权政策属于本软件服务使用协议不可分割的一部分。</p>
<ol>
<li><p>适用范围</p>
<p>a) 在您使用本软件网络服务，本软件自动接收并记录的您的手机上的信息，包括但不限于您的健康数据、使用的语言、访问日期和时间、软硬件特征信息及您需求的网页记录等数据；</p>
</li>
<li><p>信息的使用</p>
<p>a)在获得您的数据之后，本软件会将其上传至服务器，以生成您的排行榜数据，以便您能够更好地使用服务。</p>
</li>
<li><p>信息披露</p>
<p>a)本软件不会将您的信息披露给不受信任的第三方。</p>
<p>b)根据法律的有关规定，或者行政或司法机构的要求，向第三方或者行政、司法机构披露；</p>
<p>c)如您出现违反中国有关法律、法规或者相关规则的情况，需要向第三方披露；</p>
</li>
<li><p>信息存储和交换</p>
<p>本软件收集的有关您的信息和资料将保存在本软件及（或）其关联公司的服务器上，这些信息和资料可能传送至您所在国家、地区或本软件收集信息和资料所在地的境外并在境外被访问、存储和展示。</p>
</li>
<li><p>信息安全</p>
<p>a)在使用本软件网络服务进行网上交易时，您不可避免的要向交易对方或潜在的交易对方披露自己的个人信息，如联络方式或者邮政地址。请您妥善保护自己的个人信息，仅在必要的情形下向他人提供。如您发现自己的个人信息泄密，请您立即联络本软件客服，以便本软件采取相应措施。</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/terminalTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/terminalTips/" class="post-title-link" itemprop="url">terminalTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:16:22 / 修改时间：03:16:39" itemprop="dateCreated datePublished" datetime="2021-04-06T03:16:22+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Terminal-Tips"><a href="#Terminal-Tips" class="headerlink" title="Terminal Tips"></a>Terminal Tips</h1><h2 id="常用系统命令"><a href="#常用系统命令" class="headerlink" title="常用系统命令"></a>常用系统命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now // 重启</span><br><span class="line">shutdown now    // 关机</span><br><span class="line"></span><br><span class="line">pmset -g                   // 显示电源管理设置信息</span><br><span class="line">sudo pmset displaysleep 15 // 设置显示器无活动15分钟后关闭</span><br><span class="line">sudo pmset sleep 30        // 计算机无活动30分钟后休眠</span><br></pre></td></tr></table></figure>



<h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><ol>
<li>Command + L：清空一行</li>
<li>Command + K：清空全部</li>
</ol>
<h2 id="使用-sudo-快速执行上一条命令"><a href="#使用-sudo-快速执行上一条命令" class="headerlink" title="使用 sudo 快速执行上一条命令"></a>使用 sudo 快速执行上一条命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo !!</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果由于你忘了使用sudo而导致命令行返回一个错误，只需输入sudo !!就可以用sudo来执行上一条指令。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/macOSTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/macOSTips/" class="post-title-link" itemprop="url">macOSTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:15:49 / 修改时间：03:16:07" itemprop="dateCreated datePublished" datetime="2021-04-06T03:15:49+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="macOS-Tips"><a href="#macOS-Tips" class="headerlink" title="macOS Tips"></a>macOS Tips</h1><h2 id="macOS-安全验证工具链中添加-Touch-ID-验证"><a href="#macOS-安全验证工具链中添加-Touch-ID-验证" class="headerlink" title="macOS 安全验证工具链中添加 Touch ID 验证"></a>macOS 安全验证工具链中添加 Touch ID 验证</h2><blockquote>
<p>TIL, macOS 在 /etc/pam.d/sudo 里面增加一行 auth sufficient pam_tid.so 可以给 sudo 加上 TouchID 验证</p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxdm0k6iyj30b103ywfl.jpg"></p>
<p><img src="https://tva1.sinaimg.cn/large/008eGmZEly1goxdmk2iy6j30uu0e0q5i.jpg"></p>
<h2 id="macOS-的-mds-stores-导致应用程序内存不足的故障解决记录"><a href="#macOS-的-mds-stores-导致应用程序内存不足的故障解决记录" class="headerlink" title="macOS 的 mds_stores 导致应用程序内存不足的故障解决记录"></a>macOS 的 mds_stores 导致应用程序内存不足的故障解决记录</h2><p>Apple的产品专家两三个小时后给我回电了，提供了解决办法，并将解决方法发送到了我的邮箱。 我猜这个方法应该更可靠，适合当前版本（macOS High Sierra 10.13.1），如下：</p>
<p>您可以尝试以下方案： </p>
<p>1）在终端中键入命令 <code>&quot;sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.metadata.mds.plist”</code> </p>
<p>2）完成后重启电脑 3）确认您的电脑未开启 Time Machine，功能的情况下，执行以下重建命令：</p>
<p><code>sudo mdutil -i off</code> // &lt;press [return]&gt;</p>
<p><code>sudo mdutil -E</code> // &lt;press [return]&gt; </p>
<p><code>sudo mdutil -i on</code> // &lt;press [return]&gt;</p>
<p> 需要等待完成重建，完成后再尝试确认是否可以解决。</p>
<h2 id="Youtube-download"><a href="#Youtube-download" class="headerlink" title="Youtube-download"></a>Youtube-download</h2><ol>
<li><p>安装youtube-dl</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install youtube-dl</span><br></pre></td></tr></table></figure></li>
<li><p>安装you-get</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install you-get</span><br></pre></td></tr></table></figure></li>
</ol>
<p>那么需要安装的ffmpeg的库该如何安装呢？可以参看这个仓库：</p>
<ul>
<li>​        <a target="_blank" rel="noopener" href="https://www.luckydesigner.space/wp-content/themes/begin5.2/inc/go.php?url=https://github.com/holzschu/a-Shell-commands">https://github.com/holzschu/a-Shell-commands</a></li>
</ul>
<p>点击对应的链接下载，或者直接点击下载这个链接：</p>
<ul>
<li>​        <a target="_blank" rel="noopener" href="https://www.luckydesigner.space/wp-content/themes/begin5.2/inc/go.php?url=https://github.com/holzschu/a-Shell-commands/releases/download/0.1/ffmpeg.wasm">https://github.com/holzschu/a-Shell-commands/releases/download/0.1/ffmpeg.wasm</a></li>
</ul>
<p>之后打开文件这个app——File App，就会看到它已经在Download这个文件夹里面了，先留着备用。</p>
<p>然后前往ipad本机，选择a-Shell文件夹，进入后新建一个名为bin的文件夹，如下图所示。</p>
<p>然后将那个备用的”ffmpeg.wasm”文件，转移到该文件夹即可。</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>这样就可以实现下载视频，音频，图片之类的了。</p>
<p>比如下载小鸡小鸡歌曲，只需要输入以下代码即可：</p>
<p><code>youtube-dl &quot;ytsearch:小鸡小鸡&quot;</code></p>
<p>下载完成后，就到File App里面的A-shell查看就可以了，如下图所示。</p>
<h2 id="删除-App-的代码签名（以避免-OCSP-在签名证书校验时通过-http-80-明文发送哈希）"><a href="#删除-App-的代码签名（以避免-OCSP-在签名证书校验时通过-http-80-明文发送哈希）" class="headerlink" title="删除 App 的代码签名（以避免 OCSP 在签名证书校验时通过 http:80 明文发送哈希）"></a>删除 App 的代码签名（以避免 OCSP 在签名证书校验时通过 http:80 明文发送哈希）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">codesign --remove-signature foo.app</span><br><span class="line">codesign --remove-signature &lt;#your app’s path#&gt;</span><br></pre></td></tr></table></figure>



<h2 id="If-you-don’t-like-Big-Sur’s-new-title-style-and-want-to-revert-to-how-it-looks-in-Catalina"><a href="#If-you-don’t-like-Big-Sur’s-new-title-style-and-want-to-revert-to-how-it-looks-in-Catalina" class="headerlink" title="If you don’t like Big Sur’s new title style and want to revert to how it looks in Catalina:"></a>If you don’t like Big Sur’s new title style and want to revert to how it looks in Catalina:</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write -g NSWindowSupportsAutomaticInlineTitle -bool false</span><br></pre></td></tr></table></figure>

<p>and relaunch Finder.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/04/06/iosDevTips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/06/iosDevTips/" class="post-title-link" itemprop="url">iosDevTips</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-04-06 03:14:07 / 修改时间：03:14:55" itemprop="dateCreated datePublished" datetime="2021-04-06T03:14:07+00:00">2021-04-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="如何解决无法删除苹果开发者证书"><a href="#如何解决无法删除苹果开发者证书" class="headerlink" title="如何解决无法删除苹果开发者证书"></a>如何解决无法删除苹果开发者证书</h2><blockquote>
<p>I also faced the same issue today. The following steps fixed my issue.</p>
<ol>
<li>Download <a target="_blank" rel="noopener" href="https://developer.apple.com/certificationauthority/AppleWWDRCA.cer">https://developer.apple.com/certificationauthority/AppleWWDRCA.cer</a></li>
<li>Double-click to install to Keychain.</li>
<li>Then in Keychain, Select View -&gt; “Show Expired Certificates” in Keychain app.</li>
<li>It will list all the expired certifcates.</li>
<li>Delete “Apple Worldwide Developer Relations Certificate Authority certificates” from “login” tab</li>
<li>And also delete it from “System” tab.</li>
</ol>
<p>Now you are ready go.</p>
</blockquote>
<h2 id="jenkins-配置安全策略admin没有Overall-Read权限"><a href="#jenkins-配置安全策略admin没有Overall-Read权限" class="headerlink" title="jenkins 配置安全策略admin没有Overall/Read权限"></a><strong>jenkins</strong> 配置安全策略<strong>admin</strong>没有<strong>Overall/Read</strong>权限</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/myNameIssls/article/details/70227838">https://blog.csdn.net/myNameIssls/article/details/70227838</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangmuming/article/details/22925987">https://blog.csdn.net/wangmuming/article/details/22925987</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://ryotrix.dev/2021/03/31/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Lex">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/31/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">代码质量总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-31 16:08:07" itemprop="dateCreated datePublished" datetime="2021-03-31T16:08:07+00:00">2021-03-31</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-07-21 09:02:57" itemprop="dateModified" datetime="2021-07-21T09:02:57+00:00">2021-07-21</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="代码设计原则"><a href="#代码设计原则" class="headerlink" title="代码设计原则"></a>代码设计原则</h2><ol>
<li><p>Catch 内尽量简洁</p>
<p>只做log和保护性操作（e.g. 回滚）</p>
</li>
<li><p>assert中的condition一般在assert后会通过if进行过滤</p>
</li>
<li><p>不同数据类型不可直接判等</p>
</li>
<li><p>try发生异常后，后面的代码直接跳过，进入catch块。因此try块代码尽量少，避免多个可能抛出异常的代码放在同一个try块中</p>
</li>
</ol>
<h2 id="代码认知复杂度-Cognitive-Complexity"><a href="#代码认知复杂度-Cognitive-Complexity" class="headerlink" title="代码认知复杂度 Cognitive Complexity"></a>代码认知复杂度 Cognitive Complexity</h2><ol>
<li><p>避免多层嵌套</p>
<ol>
<li>提前退出（guard else return）</li>
</ol>
</li>
<li><p>条件判断避免多条并列（if A &amp;&amp; B &amp;&amp; C）</p>
</li>
<li><p>分支条件避免同一级ifelse判断条件不一致</p>
<p>e.g. </p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ❌</span></span><br><span class="line"><span class="keyword">if</span> <span class="type">A</span> <span class="operator">&amp;&amp;</span> <span class="type">B</span> &#123;</span><br><span class="line">   <span class="comment">// statement a</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="operator">!</span><span class="type">A</span> &#123;</span><br><span class="line">   <span class="comment">// statement b</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ✅</span></span><br><span class="line"><span class="keyword">if</span> <span class="type">A</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> <span class="type">B</span> &#123;</span><br><span class="line">      <span class="comment">// statement a</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="comment">// statement b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="if-else嵌套和if-return-写法转换"><a href="#if-else嵌套和if-return-写法转换" class="headerlink" title="if/else嵌套和if{return}写法转换"></a>if/else嵌套和if{return}写法转换</h2><p>e.g.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="type">A</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">if</span> <span class="type">B</span><span class="operator">+</span><span class="type">C</span><span class="operator">+</span><span class="type">D</span> &#123;</span><br><span class="line">    <span class="type">P</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">if</span> <span class="type">B</span><span class="operator">+</span><span class="type">C</span><span class="operator">+</span><span class="type">E</span> &#123;</span><br><span class="line">    <span class="type">Q</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⬇️</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">if</span> <span class="type">B</span><span class="operator">+</span><span class="type">C</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> <span class="type">A</span><span class="operator">+</span><span class="type">D</span> &#123;</span><br><span class="line">    <span class="type">P</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="operator">!</span><span class="type">A</span><span class="operator">+</span><span class="type">E</span> &#123;</span><br><span class="line">    <span class="type">Q</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>⚠️ 前提：if/else嵌套中的每个分支内部均不存在使用了if{return}提前退出的代码。</p>
<p>i.e. 纯if/else嵌套可以重写为if{return}的模式，否则需要将分支处理为嵌套判断再改为if{return}。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lex</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
